

# å¼€å‘ç¯å¢ƒæ­å»ºä¸é¡¹ç›®åˆå§‹åŒ–

æœ¬æ¬¡é¡¹ç›®æˆ‘ä»¬ä½¿ç”¨çš„å¼€å‘ç¯å¢ƒæ˜¯ï¼Œ`Vagrant ` + `VirtualBox` + `PyCharm ä¸“ä¸šç‰ˆ ` + `Ubuntu 18.04`ã€‚



æ³¨æ„ï¼š

- pycharm éœ€è¦é€‰æ‹©ä¸“ä¸šç‰ˆï¼Œä¸ç„¶æ²¡æœ‰ Django ç›¸å…³çš„æ™ºèƒ½è¡¥å…¨å’Œè¿è¡Œã€è°ƒè¯•åŠŸèƒ½ï¼Œä¹Ÿæ²¡æœ‰ Vagrant ç›¸å…³çš„è¿æ¥é€‰é¡¹

  > ä¸“ä¸šç‰ˆæ˜¯æ”¶è´¹çš„ï¼Œä½†æ˜¯æä¾›äº†30å¤©çš„å…è´¹è¯•ç”¨ã€‚è´­ä¹°çš„è¯ï¼Œä¸ªäººè®¸å¯è¯å·®ä¸å¤šæ˜¯8.9åˆ€ä¸€ä¸ªæœˆã€89åˆ€ä¸€å¹´
  >
  > è´­ä¹°é“¾æ¥ï¼šhttps://www.jetbrains.com/pycharm/buy/?fromIDE#personal?billing=yearly
  >
  > å¦‚æœæ˜¯å­¦ç”Ÿæˆ–è€…å¼€æºå¼€å‘è€…å¯ä»¥ç”³è¯·å…è´¹è®¸å¯è¯ï¼Œæ›´å¤šä¼˜æƒ è¯·å‚è€ƒï¼šhttps://www.jetbrains.com/pycharm/buy/#discounts?billing=yearly

- æˆªè‡³ç›®å‰2021-08-1ï¼Œ `Virtualbox`å°šä¸æ”¯æŒæ­è½½è‹¹æœè‡ªç ”m1å¤„ç†å™¨çš„ Mac ç”µè„‘ï¼Œå¦‚éœ€è¦è¯·ç§»æ­¥`Docker`ç‰ˆæœ¬çš„æ•™ç¨‹ã€‚

- æœ‰äº›åŒå­¦ä¼šé—®ï¼š

  - æˆ‘å·²ç»æœ‰ä¸€ä¸ª ubuntu18 çš„æœºå™¨äº†ï¼Œèƒ½ä¸èƒ½ç›´æ¥ç”¨é‚£ä¸ªï¼Œä¸ç”¨ vagrant å•Šï¼Ÿ

    å¯ä»¥ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦ï¼Œå¯ä»¥æŠŠ vagrant å½“ä½œä¸€ä¸ªçŸ¥è¯†ç‚¹

  - èƒ½ä¸èƒ½ç›´æ¥åœ¨ç‰©ç†æœºä¸Šåšå¼€å‘ï¼Ÿ

    ä¸è¡Œï¼Œç»Ÿä¸€å¼€å‘ç¯å¢ƒè€å¸ˆå’ŒåŠ©æ•™æ‰æœ‰å¯èƒ½å›ç­”ä½ çš„é—®é¢˜ã€‚

  - èƒ½ä¸ç”¨ anacondaã€virtualenvæ¥æ›¿ä»£ vagrantå•Šï¼Ÿ

    ä¸è¡Œã€‚vagrant æ˜¯è™šæ‹Ÿæœºï¼Œanacondaã€virtualenvæ˜¯è™šæ‹Ÿç¯å¢ƒï¼Œä¸¤è€…å®Œå…¨ä¸æ˜¯ä¸€å›äº‹ï¼Œæ²¡æœ‰å¯æ¯”æ€§ã€‚
    
  - èƒ½ä¸èƒ½ç”¨ vscode æ›¿ä»£ pycharm å¼€å‘ï¼Ÿ
  
    ä¸å»ºè®®ï¼Œå› ä¸º vscode è¿œæ¯” pycharm å¼±å°ï¼Œä¼šå½±å“å­¦ä¹ æ•ˆæœ
    
  - èƒ½ä¸èƒ½ç”¨ Visual Studio æ¥åšé¡¹ç›®
  
      ä¸æä¾›æ•™ç¨‹å¤–çš„æ”¯æŒï¼Œå¦‚æœéœ€è¦é—®é¢˜éœ€è¦è‡ªå·±å‡ è§£å†³ï¼Œæ‰€ä»¥ä¸æ¨è



## å‰æœŸå‡†å¤‡

### 1. å®‰è£… `Virtualbox`

ä¸‹è½½åœ°å€: `https://www.virtualbox.org/wiki/Downloads`



æ‰“å¼€ä¸‹è½½è¿æ¥åï¼Œé€‰æ‹©é€‚åˆè‡ªå·±æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚

![](./img/1.png)

å¦‚æ“ä½œç³»ç»Ÿä¸º Windowsï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© Windows hostsï¼Œä¸‹è½½å®Œæˆåä¼šè·å¾—å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å®‰è£…åŒ…ã€‚

![](./img/2.png)

åŒå‡»è¿è¡Œè¯¥å®‰è£…åŒ…ã€‚

![](./img/3.png)

å…¨éƒ¨é»˜è®¤ä¸€ç›´ç‚¹å‡»`ä¸‹ä¸€æ­¥`ã€‚

![](./img/4.png)

ç‚¹å‡»`æ˜¯`ï¼Œæ­¤å¤„`Virtualbox `ä¼šä¸ºæˆ‘ä»¬å®‰è£…è™šæ‹Ÿç½‘å¡ã€‚

![](./img/5.png)

æ­¤æ—¶ä¾¿å®Œæˆäº† `Virtualbox ` å®‰è£…ã€‚

![](./img/6.png)



> å…³äºä¸ºä»€ä¹ˆä½¿ç”¨ `Virtualbox `è€Œä¸æ˜¯ `VMware` ï¼Ÿ
>
> â€‹	å› ä¸º `Virtualbox `æ˜¯å¼€æºå…è´¹çš„ï¼Œ`VMware`æ˜¯å•†ä¸šæ”¶è´¹çš„ï¼Œè€Œä¸”æƒ³åœ¨ `VMware` ä¸Šä½¿ç”¨ `Vagrant` è¿˜è¦äºŒæ¬¡æ”¶è´¹ã€‚

### 2. å®‰è£… `Vagrant `

ä¸‹è½½åœ°å€ï¼š `https://www.vagrantup.com/downloads`



é€‰æ‹©é€‚åˆè‡ªå·±æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œæ­¤å¤„ä»¥ `Windows` ä¸ºä¾‹ï¼Œç‚¹å‡» `Download` æŒ‰é’®ä¸‹è½½ã€‚

![](./img/7.png)

ä¸‹è½½å®Œæˆåä¼šå¾—åˆ° `vagrant_2.2.14_x86_64.msi` æ–‡ä»¶ã€‚

![](./img/8.png)

åŒå‡»æ‰“å¼€è¿›è¡Œå®‰è£…ã€‚

![](./img/9.png)

ä¹‹åä¸€è·¯ `Next` å°±å¯ä»¥äº†ã€‚

![](./img/10.png)

å®‰è£…å®Œæˆåéœ€è¦`é‡å¯` è®¡ç®—æœºã€‚

 

é‡å¯ä¹‹åæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ `vagrant --version` ï¼Œçœ‹åˆ°æœ‰ç‰ˆæœ¬å·è¾“å‡ºï¼Œå°±è¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚

```powershell
PS C:\Users\27> vagrant --version
Vagrant 2.2.14
```



> `Vagrant` å¹¶ä¸æä¾›è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºå¤–æŒ‚ï¼Œé€šè¿‡è™šæ‹Ÿæœºçš„ç®¡ç†æ¥å£æ¥ç®¡ç†è™šæ‹Ÿæœºï¼Œè®©ç”¨æˆ·æ›´è½»æ¾çš„è¿›è¡Œä¸€äº›å¸¸ç”¨é…ç½®ï¼Œæ¯”å¦‚ï¼šCPU/Memory/IP/DISKç­‰åˆ†é…ã€‚å¹¶ä¸”æä¾›äº†ä¸€äº›å…¶å®ƒçš„ç®¡ç†æ“ä½œï¼šæ¯”å¦‚å¼€æœºè¿è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œé•œåƒäºŒæ¬¡æ‰“åŒ…ï¼Œæ’ä»¶ç¼–å†™ç­‰ç­‰ã€‚



### 3. åˆ›å»ºä»£ç ä»“åº“

é¦–å…ˆæˆ‘ä»¬æ‰“å¼€æˆ‘ä»¬çš„ github é¡µé¢ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„ + ï¼Œå†ç‚¹å‡» New repository æŒ‰é’®åˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ã€‚

![](./img/52.png)

æ¥ä¸‹æ¥ä¼šè®©ä½ å¡«å†™ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘ä»¬ä»£ç ä»“åº“çš„åå­— django-twitterï¼Œç„¶åæ·»åŠ ä¸€ä¸ª `README.md` æ–‡ä»¶.

![](./img/53.png)

å¡«å†™å®Œç›¸å…³ä¿¡æ¯åï¼Œç‚¹å‡» Create repository æŒ‰é’®ï¼Œæˆ‘ä»¬å°±åˆ›å»ºäº†ä¸€ä¸ªä»£ç ä»“åº“ã€‚

![](./img/54.png)

> æ³¨æ„é€‰SSHï¼Œè€Œä¸æ˜¯å·¦è¾¹çš„HTTPS 

### 4.å…‹éš†ä»£ç ä»“åº“

ç„¶åæˆ‘ä»¬å¯ä»¥å¤åˆ¶ä¸Šå›¾çº¢æ¡†çš„éƒ¨åˆ†ï¼Œä½¿ç”¨ `git clone` å‘½ä»¤å°†ä»£ç ä»“åº“å¤åˆ¶åˆ°æœ¬åœ°ç”µè„‘çš„åˆé€‚ä½ç½®ï¼š

```shell
git clone git@github.com:yourname/django-twitter.git
```

å¦‚æœ clone æˆåŠŸï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºæç¤ºï¼Œä¸‹å›¾çš„æ“ä½œæˆ‘ä»¬æ˜¯åœ¨å®¿ä¸»æœºçš„ Git Bash ä¸Šè¿›è¡Œæ“ä½œã€‚

![](./img/55.png)

æ­¤æ—¶æˆ‘ä»¬æœ¬åœ°çš„ç›®å½•ç»“æ„å¤§è‡´ä¸ºï¼š

```shell
django-twitter
â”œâ”€â”€ .git 
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

> è¿™é‡Œ `.git` æ˜¯ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹ï¼Œå¦‚æœä½ åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­çœ‹ä¸è§è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œéœ€è¦æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨çš„`æŸ¥çœ‹éšè—æ–‡ä»¶`é€‰é¡¹ã€‚
>
> æ¥ä¸‹æ¥çš„é¡¹ç›®å¼€å‘éƒ½æ˜¯åœ¨è‡ªå·±çš„ä»“åº“è¿›è¡Œçš„ã€‚

### 5.é…ç½®å…¬é’¥ï¼ˆå¯é€‰ï¼‰

> å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ git ï¼Œä»¥å‰æ²¡æœ‰åœ¨è¯¥ç”µè„‘ä¸Šæ·»åŠ è¿‡å…¬é’¥ï¼Œé‚£è¿™æ­¥æ˜¯å¿…é¡»çš„ã€‚

å¦‚æœä½ åœ¨ä½¿ç”¨ä½¿ç”¨Git å…‹éš†é¡¹ç›®çš„æ—¶å€™é‡åˆ°ä¸‹é¢çš„é—®é¢˜ï¼Œå°±éœ€è¦é…ç½®ä»¥ä¸‹å…¬é’¥äº†ã€‚

```bash
git clone git@github.com:jiuzhangsuanfa/twitter-term-1.git
Cloning into 'twitter-term-1'...
The authenticity of host 'github.com (192.30.255.112)' can't be established.
RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added 'github.com,192.30.255.112' (RSA) to the list of known hosts.
git@github.com: Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
```

æˆ–è€…è¿™æ ·ä¹Ÿéœ€è¦é…ç½®å…¬é’¥ï¼Œè·Ÿç€ä¸‹é¢çš„å†…å®¹é…ç½®å…¬é’¥å°±å¥½äº†ã€‚

![image-20210519100227745](./img/0519-1.png)



**æ·»åŠ å…¬é’¥çš„æ–¹æ³•**

- æ­¥éª¤ä¸€ï¼šåœ¨ç»ˆç«¯è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŠŠé‚®ç®±æ¢æˆè‡ªå·±çš„

  ```bash
  ssh-keygen -t rsa -C "email@email.com"
  ```
> è¿‡ç¨‹ä¸­åªéœ€è¦ä¸€è·¯å›è½¦ï¼Œä¸éœ€è¦è¾“å…¥ä»»ä½•å†…å®¹ï¼Œé»˜è®¤ä¼šåœ¨~/.sshè·¯å¾„ä¸‹ç”Ÿæˆ`id_rsa` å’Œ`id_rsa.pub`æ–‡ä»¶ã€‚`id_rsa.pub`å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚


  ![image.png](./img/100.png)

- æ­¥éª¤äºŒï¼šæŸ¥çœ‹ `~/.ssh`è·¯å¾„ä¸‹çš„`id_rsa.pub`æ–‡ä»¶,å¹¶å¤åˆ¶æ–‡ä»¶å†…å®¹

  ![image.png](./img/101.png)

  > ç”Ÿæˆçš„`id_rsa.pub`ä¸€èˆ¬åœ¨`~/.ssh/`ç›®å½•ä¸‹ã€‚
  >
  > æ³¨æ„ï¼šéœ€è¦æŠŠä» **ssh-rsa**å¼€å§‹åˆ°**é‚®ç®±**çš„æ‰€æœ‰å†…å®¹éƒ½å¤åˆ¶

- æ­¥éª¤ä¸‰ï¼šæ‰“å¼€è‡ªå·±çš„Githubä¸»é¡µï¼Œé€‰æ‹©è®¾ç½®

![image.png](./img/103.png)

- æ­¥éª¤å››ï¼šé€‰æ‹©å·¦ä¾§çš„`SSH and GPG keys`ï¼Œåœ¨é€‰æ‹©`New SSH key`

![image.png](./img/104.png)

- æ­¥éª¤äº”ï¼šæŠŠåˆšåˆšé‚£ä¸ªå…¬é’¥å¤åˆ¶åˆ°è¿™é‡Œé¢å°±å¥½äº†ï¼Œtitleéšä¾¿å¡«ï¼Œæ— æ‰€è°“ã€‚ç‚¹å‡»`Add SSH key`ä¿å­˜ã€‚

![image.png](./img/105.png)

> æ³¨æ„ï¼šå› ä¸ºç”Ÿæˆçš„å…¬é’¥æ˜¯æ¥è‡ªæˆ‘ä»¬çš„å®¿ä¸»æœºï¼Œå¯ä»¥é€šè¿‡å®¿ä¸»æœºçš„gitç¨‹åºcloneã€pullä»£ç 
>
> ä½†æ˜¯å¦‚æœæƒ³è¦é€šè¿‡è™šæ‹Ÿæœºæ¥cloneã€pullã€pushä»£ç çš„è¯ï¼Œè¿˜éœ€è¦è®©è™šæ‹Ÿæœºä¹Ÿç”Ÿæˆå…¬é’¥ï¼Œå¹¶æ·»åŠ åˆ°Githubä¸­ã€‚
>
> å› ä¸ºè™½ç„¶å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºè™½ç„¶éƒ½è¿è¡Œåœ¨åŒä¸€å°ç”µè„‘ä¸Šï¼Œä½†æ˜¯æ˜¯ç‰©ç†ä¸Šæ˜¯éš”ç»çš„ï¼Œéƒ½æœ‰å„è‡ªçš„gitç¨‹åºå’Œå¯†é’¥ä½œç”¨èŒƒå›´ã€‚
>
> ä½†æ˜¯å› ä¸ºåœ¨.git é‡Œé¢ä¼šè®°å½•ä¸€äº›å’Œä¸»æœºç›¸å…³çš„ä¿¡æ¯ï¼Œå› ä¸ºæ˜¯å…±äº«æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥å†åœ¨è™šæ‹Ÿæœºä¸­æ‰§è¡ŒgitæŒ‡ä»¤çš„æ—¶å€™ï¼Œæœ‰äº›ä¿¡æ¯ä¼šå¯¹ä¸ä¸Šå°±ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å°½é‡åœ¨å®¿ä¸»æœºæœºå™¨ä¸Šæ“ä½œå§ï¼



## åˆ›å»ºè™šæ‹Ÿæœº

> Vagrantæ˜¯ä¸€æ¬¾ç”¨äºæ„å»ºåŠé…ç½®è™šæ‹Ÿå¼€å‘ç¯å¢ƒçš„è½¯ä»¶ï¼ŒåŸºäºRuby,ä¸»è¦ä»¥å‘½ä»¤è¡Œçš„æ–¹å¼è¿è¡Œã€‚
>
> ä¸»è¦ä½¿ç”¨Oracleçš„å¼€æºVirtualBoxè™šæ‹ŸåŒ–ç³»ç»Ÿï¼Œä¸Chefï¼ŒSaltï¼ŒPuppetç­‰ç¯å¢ƒé…ç½®ç®¡ç†è½¯ä»¶æ­é…ä½¿ç”¨ï¼Œ å¯ä»¥å®è¡Œå¿«é€Ÿè™šæ‹Ÿå¼€å‘ç¯å¢ƒçš„æ„å»ºã€‚
>
> æ—©æœŸä»¥VirtualBoxä¸ºå¯¹è±¡ï¼Œ1.1ä»¥åçš„ç‰ˆæœ¬ä¸­å¼€å§‹å¯¹åº”VMwareç­‰è™šæ‹ŸåŒ–è½¯ä»¶ï¼ŒåŒ…æ‹¬Amazon EC2ä¹‹ç±»æœåŠ¡å™¨ç¯å¢ƒçš„å¯¹åº”ã€‚

ç›´æ¥åœ¨ VirtualBox ä¸­å®‰è£…ç³»ç»Ÿè¦ä½¿ç”¨ ISO é•œåƒæ–‡ä»¶ï¼Œåœ¨ Docker ä¸­å®‰è£…ç³»ç»Ÿè¦ä½¿ç”¨ image æ–‡ä»¶ï¼Œè€Œè¦é€šè¿‡ Vagrant å®‰è£…è™šæ‹Ÿæœºä¾¿æ˜¯é€šè¿‡ BOX å°±åƒæ–‡ä»¶ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥é€šè¿‡ Box æ–‡ä»¶æ¥å®‰è£…è™šæ‹Ÿæœºå§ï¼



### 1. å‡†å¤‡ Box é•œåƒ

#### a. ä¸‹è½½ Box é•œåƒ 

ä¸‹è½½åœ°å€ï¼š`https://app.vagrantup.com/hashicorp/boxes/bionic64`

>  æ­¤å¤„ä¸‹è½½çš„ `Ubuntu` ä¸æ˜¯ä» `Ubuntu` å®˜ç½‘ä¸‹è½½çš„ ISO é•œåƒï¼Œè€Œæ˜¯ `Vagrant ` å®˜ç½‘æ‰“åŒ…å¥½çš„ `box` é•œåƒï¼Œæˆ‘ä»¬çš„é¡¹ç›®ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿä¸º Ubuntu 18.04 LTSã€‚

![](./img/11.png)

æ­¤å¤„æˆ‘ä»¬é€‰æ‹© `virtualbox Hosted by Vagrant Cloud (494 MB)` ï¼Œç‚¹å‡»å³ä¾§çš„ä¸‹è½½æŒ‰é’®ä¾¿å¯è¿›è¡Œä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåå¯ä»¥å¾—åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ–‡ä»¶ï¼š

![](./img/13.png)

ç”±äºé»˜è®¤çš„æ–‡ä»¶åå¹¶ä¸æ˜¯ç‰¹åˆ«å¥½è®°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æ–‡ä»¶åæ”¹ä¸º `bionic64.box`ï¼Œå¹¶å°†å…¶æ”¾åˆ°æˆ‘ä»¬çš„ `django-twitter` ä¸‹é¢ï¼Œå½“å‰ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š

```shell
django-twitter
â”œâ”€â”€ .git
â”œâ”€â”€ .gitignore
â”œâ”€â”€ bionic64.box
â””â”€â”€ README.md
```

> .git

#### b. æ·»åŠ  Box é•œåƒ

åœ¨å½“å‰è·¯å¾„ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Git Bash æ¥è¿è¡Œ Vagrant çš„å‘½ä»¤ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨ä»»æ„ä½ å–œæ¬¢çš„ç»ˆç«¯ã€‚

![](./img/57.png)

> æ³¨æ„è¦è¿›å…¥åˆ° `django-twitter` ä¸­æ‰§è¡Œæˆ‘ä»¬çš„æ–‡ä»¶ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°† Box é•œåƒæ·»åŠ åˆ°æˆ‘ä»¬çš„ Vagrant ä¸­ï¼š

```shell
vagrant box add hashicorp/bionic64 bionic64.box
```

> `hashicorp/bionic64` æ˜¯æˆ‘ä»¬ç»™ Box å–çš„åå­—ï¼Œhashicorp æ˜¯å¼€å‘ Vagrant è¿™ä¸ªäº§å“çš„å…¬å¸åå­—
>
> `bionic64.box` æ˜¯ Box æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œè¿™é‡Œå°±ç›¸å½“äºæ˜¯ç›¸å¯¹è·¯å¾„ã€‚

æ·»åŠ åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹ï¼š

```shell
vagrant box list
```

çœ‹åˆ°ä¸‹å›¾è¯´æ˜æ·»åŠ æˆåŠŸã€‚

![](./img/36.png)



### 2. è™šæ‹Ÿæœºå¯åŠ¨å‰é…ç½®

> `Vagrantfile`ã€`provision.sh`ã€`requirements.txt `ä¸‰ä¸ªæ–‡ä»¶ä¸éœ€è¦è‡ªå·±ä¿®æ”¹ï¼Œç›´æ¥ä»ä¹ç« ä»“åº“ä¸­è·å–å³å¯ï¼Œä¸‹æ–‡æœ‰ä»‹ç»ï¼Œä¸è¦ç€æ€¥ã€‚

#### a.  Vagrantfile

`Vagrantfile` æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼šï¼ˆé¡¹ç›®ä¸­è¦ç”¨åˆ°`Vagrantfile`é…ç½®æ–‡ä»¶ä¼šåœ¨ä»“åº“ä¸­æä¾›ï¼Œå±Šæ—¶å¤åˆ¶ç²˜è´´å³å¯ï¼‰

```ruby
# -*- mode: ruby -*-
# vi: set ft=ruby :

# All Vagrant configuration is done below. The "2" in Vagrant.configure
# configures the configuration version (we support older styles for
# backwards compatibility). Please don't change it unless you know what
# you're doing.
Vagrant.configure("2") do |config|
  # The most common configuration options are documented and commented below.
  # For a complete reference, please see the online documentation at
  # https://docs.vagrantup.com.

  # Every Vagrant development environment requires a box. You can search for
  # boxes at https://vagrantcloud.com/search.
  config.vm.box = "hashicorp/bionic64"

  # Disable automatic box update checking. If you disable this, then
  # boxes will only be checked for updates when the user runs
  # `vagrant box outdated`. This is not recommended.
  # config.vm.box_check_update = false

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine. In the example below,
  # accessing "localhost:8080" will access port 80 on the guest machine.
  # NOTE: This will enable public access to the opened port
  # config.vm.network "forwarded_port", guest: 80, host: 8080

  # Create a forwarded port mapping which allows access to a specific port
  # within the machine from a port on the host machine and only allow access
  # via 127.0.0.1 to disable public access
  # config.vm.network "forwarded_port", guest: 80, host: 8080, host_ip: "127.0.0.1"

  # Create a private network, which allows host-only access to the machine
  # using a specific IP.
  # config.vm.network "private_network", ip: "192.168.33.10"

  # Create a public network, which generally matched to bridged network.
  # Bridged networks make the machine appear as another physical device on
  # your network.
  # config.vm.network "public_network"

  # Share an additional folder to the guest VM. The first argument is
  # the path on the host to the actual folder. The second argument is
  # the path on the guest to mount the folder. And the optional third
  # argument is a set of non-required options.
  # config.vm.synced_folder "../data", "/vagrant_data"

  # Provider-specific configuration so you can fine-tune various
  # backing providers for Vagrant. These expose provider-specific options.
  # Example for VirtualBox:
  #
  # config.vm.provider "virtualbox" do |vb|
  #   # Display the VirtualBox GUI when booting the machine
  #   vb.gui = true
  #
  #   # Customize the amount of memory on the VM:
  #   vb.memory = "1024"
  # end
  #
  # View the documentation for the provider you are using for more
  # information on available options.

  # Enable provisioning with a shell script. Additional provisioners such as
  # Ansible, Chef, Docker, Puppet and Salt are also available. Please see the
  # documentation for more information about their specific syntax and use.
  # config.vm.provision "shell", inline: <<-SHELL
  #   apt-get update
  #   apt-get install -y apache2
  # SHELL
end
```

æˆ‘ä»¬æ‰“å¼€ `Vagrantfile` æ–‡ä»¶ï¼Œå¯¹å…¶ä¸­çš„ä¸€äº›é…ç½®è¿›è¡Œè¯´æ˜ã€‚

- åŸæ–‡ä»¶ç¬¬15è¡Œï¼Œè¿™é‡Œæ˜¯æˆ‘ä»¬å‰é¢ç»™è™šæ‹Ÿæœºå–çš„åå­—ï¼š

```ruby
config.vm.box = "hashicorp/bionic64"
```

- åŸæ–‡ä»¶ç¬¬26è¡Œï¼Œè¿™é‡Œç»™å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´å»ºç«‹äº†ç«¯å£æ˜ å°„ï¼š

```ruby
config.vm.network "forwarded_port", guest: 80, host: 8080
```

> åç»­ä½¿ç”¨ä¸­ä¼šä½¿ç”¨ `config.vm.network "forwarded_port", guest: 8000, host: 80`ï¼Œå°†è™šæ‹Ÿæœºï¼ˆguestï¼‰çš„8000ç«¯å£æ˜ å°„ä¸ºç‰©ç†æœºçš„80ç«¯å£

- åŸæ–‡ä»¶ç¬¬35è¡Œï¼Œè¿™é‡Œä¸ºè™šæ‹ŸæœºæŒ‡å®šä¸€ä¸ªç§æœ‰ç½‘ç»œ IPï¼š

```ruby
config.vm.network "private_network", ip: "192.168.33.10"
```

- åŸæ–‡ä»¶ç¬¬46è¡Œï¼Œè¿™é‡Œç»™å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºä¹‹é—´å»ºç«‹äº†ç›®å½•æ˜ å°„ï¼Œæˆ‘ä»¬é¡¹ç›®ä¸­é»˜è®¤ä¸ä¿®æ”¹ï¼ŒVagrant ä¼šè‡ªåŠ¨åœ¨å®¿ä¸»æœºçš„ `django-twitter` å’Œè™šæ‹Ÿæœºçš„ `/vagrant` ä¹‹é—´å»ºç«‹æ˜ å°„ï¼š

```ruby
# config.vm.synced_folder "../data", "/vagrant_data"
```

- åŸæ–‡ä»¶ç¬¬66è¡Œï¼Œè¿™é‡Œå¯ä»¥è®¾ç½®å¯åŠ¨è™šæ‹Ÿæœºæ—¶ï¼Œè¦æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼š

```ruby
config.vm.provision :shell, path: "provision.sh"
```

> è¿™äº›é…ç½®è¯´æ˜åªè¦çœ‹çœ‹å°±å¥½ï¼Œéƒ½æ˜¯ vagrant è‡ªå·±ç”Ÿæˆï¼Œå®é™…ä½¿ç”¨ä¸­ä¼šä¿®æ”¹ä»–ä»¬ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤é…ç½®

#### b. provision.sh

`provision.sh` æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š

```bash
#!/usr/bin/env bash

echo 'Start!'

sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2

cd /vagrant

sudo apt-get update
sudo apt-get install tree

# å®‰è£…é…ç½®mysql8
if ! [ -e /vagrant/mysql-apt-config_0.8.15-1_all.deb ]; then
	wget -c https://dev.mysql.com/get/mysql-apt-config_0.8.15-1_all.deb
fi

sudo dpkg -i mysql-apt-config_0.8.15-1_all.deb
sudo DEBIAN_FRONTEND=noninteractivate apt-get install -y mysql-server
sudo apt-get install -y libmysqlclient-dev

if [ ! -f "/usr/bin/pip" ]; then
  sudo apt-get install -y python3-pip
  sudo apt-get install -y python-setuptools
  sudo ln -s /usr/bin/pip3 /usr/bin/pip
else
  echo "pip3 å·²å®‰è£…"
fi

# å‡çº§pipï¼Œç›®å‰å­˜åœ¨é—®é¢˜ï¼Œread timed outï¼Œçœ‹è„¸ï¼Œæœ‰æ—¶å€™å¯ä»¥ï¼Œä½†å¤§å¤šæ—¶å€™ä¸è¡Œ
# python -m pip install --upgrade pip
# æ¢æºå®Œç¾è§£å†³
# å®‰è£…pipæ‰€éœ€ä¾èµ–
pip install --upgrade setuptools -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install --ignore-installed wrapt -i https://pypi.tuna.tsinghua.edu.cn/simple
# å®‰è£…pipæœ€æ–°ç‰ˆ
pip install -U pip -i https://pypi.tuna.tsinghua.edu.cn/simple
# æ ¹æ® requirements.txt é‡Œçš„è®°å½•å®‰è£… pip packageï¼Œç¡®ä¿æ‰€æœ‰ç‰ˆæœ¬ä¹‹é—´çš„å…¼å®¹æ€§
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple


# è®¾ç½®mysqlçš„rootè´¦æˆ·çš„å¯†ç ä¸ºyourpassword
# åˆ›å»ºåä¸ºtwitterçš„æ•°æ®åº“
sudo mysql -u root << EOF
	ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'yourpassword';
	flush privileges;
	show databases;
	CREATE DATABASE IF NOT EXISTS twitter;
EOF
# fi


# å¦‚æœæƒ³ç›´æ¥è¿›å…¥/vagrantè·¯å¾„ä¸‹
# è¯·è¾“å…¥vagrant sshå‘½ä»¤è¿›å…¥
# æ‰‹åŠ¨è¾“å…¥
# è¾“å…¥ls -a
# è¾“å…¥ vi .bashrc
# åœ¨æœ€ä¸‹é¢ï¼Œæ·»åŠ cd /vagrant

echo 'All Done!'
```

> æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬å®‰è£…å¹¶é…ç½®äº† Mysql ï¼Œæ·»åŠ äº†ä¸€ä¸ª root ç”¨æˆ·ï¼Œå¹¶ä¸”æŠŠå¯†ç è®¾ç½®ä¸º `yourpassword`
>
> ä½ å¯ä»¥åœ¨è™šæ‹Ÿæœºçš„ç»ˆç«¯ä½¿ç”¨ `mysql -u root -p"your password" ` ç™»å½•æ•°æ®åº“

#### c. requirements.txt

`requirements.txt` æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š

```
Django==3.1.3
mysqlclient==2.0.3
```



#### d. è·å–é…ç½®æ–‡ä»¶ï¼ˆå¿…é€‰ï¼‰

ä¸Šé¢æåˆ°çš„é…ç½®æ–‡ä»¶å¯ä»¥ä»ä¹ç« æä¾›çš„é˜¶æ®µæ€§ä»£ç ä»“åº“ä¸­è·å–ï¼Œæœ¬é˜¶æ®µæ‰€éœ€çš„æ–‡ä»¶å¯ä»¥ä» `1-initial-vagrant` åˆ†æ”¯ä¸­è·å–ã€‚

ä»“åº“åœ°å€ï¼šhttps://github.com/jiuzhangsuanfa-org/django-twitter

![](./img/37.png)

æˆ‘ä»¬å¯ä»¥å…ˆé€‰ä¸­åˆ†æ”¯ `1-initial-vagrant`  ï¼Œç„¶åé‡‡ç”¨ä¸‹è½½å‹ç¼©åŒ…çš„æ–¹å¼å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚

æ¥ç€å°†è¿™ä¸ªåˆ†æ”¯ä¸‹çš„æ–‡ä»¶ (é™¤äº† `README.md`) å¤åˆ¶åˆ° `django-twitter` ç›®å½•ä¸‹ã€‚ï¼ˆå³æŠŠä¸‹è½½çš„zipä¸­çš„`.gitignore   `ã€ `mysql-apt-config_0.8.15-1_all.deb`   ã€`provision.sh`ã€`requirements.txt`å’Œ `Vagrantfile`è¿™äº”ä¸ªæ–‡ä»¶å¤åˆ¶åˆ° `django-twitter` ç›®å½•ä¸‹ï¼‰

å°†å¤åˆ¶è¿‡æ¥çš„ `Vagrantfile.temp` æ–‡ä»¶æ”¹æˆ `Vagrantfile` ã€‚ğŸ’¥ğŸ’¥ğŸ’¥

> æ³¨æ„å›½å¤–ç”¨æˆ·éœ€è¦å»æ‰ `provision.sh` æ–‡ä»¶ä¸­çš„ `-i https://pypi.tuna.tsinghua.edu.cn/simple`
>
> è¿™ä¸ªæ˜¯ç»™å›½å†…ç”¨æˆ·å‡†å¤‡çš„æ¸…åé•œåƒï¼ŒåŠ é€Ÿå›½å†…ç”¨æˆ·ä¸‹è½½é€Ÿåº¦çš„ï¼Œå›½å¤–å¯èƒ½é€‚å¾—å…¶åã€‚

ç¤ºæ„å›¾ï¼š

![image-20210521150624670](./img/107.png)

![image-20210521150711799](./img/108.png)

æ­¤æ—¶çš„ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š

```shell
django-twitter
â”œâ”€â”€ .git
â”œâ”€â”€ .gitignore
â”œâ”€â”€ bionic64.box
â”œâ”€â”€ mysql-apt-config_0.8.15-1_all.deb
â”œâ”€â”€ provision.sh
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â””â”€â”€ Vagrantfile
```

> ä½ é‚£é‡Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ª `.idea` çš„ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹ï¼Œå¿½ç•¥å®ƒï¼Œå®ƒæ˜¯ pycharm è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œç”¨äºè®°å½•ä¸€ä¸‹é¡¹ç›®çš„ä¸ªæ€§åŒ–é…ç½®çš„ã€‚
>
> æ­¤å¤„å¯ä»¥ä¿®æ”¹.gitignoreè¿½åŠ ä¸€è¡Œ `.idea/`ã€‚ `.idea`æ–‡ä»¶å¤¹æ˜¯Pycharmçš„é…ç½®æ–‡ä»¶

### 3. å¯åŠ¨è™šæ‹Ÿæœº

é€šè¿‡`vagrant up`å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥å¯åŠ¨è™šæ‹Ÿæœºï¼š

```shell
PS C:\Users\27\Desktop\TwitterProject\django-twitter> vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Machine already provisioned. Run `vagrant provision` or use the `--provision`
==> default: flag to force provisioning. Provisioners marked to run always will still run.
.......
```

> æ³¨æ„ï¼šåœ¨ `Vagrantfile` æ–‡ä»¶æ‰€åœ¨è·¯å¾„æ‰§è¡Œè¯¥å‘½ä»¤ã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥åœ¨æœºå™¨ä¸Šè£…å¾ˆå¤šä¸ªè™šæ‹Ÿæœºï¼Œæ‰§è¡Œ`vagrant up`å‘½ä»¤ä¼šé¦–å…ˆå¯»æ‰¾å½“å‰è·¯å¾„ä¸‹çš„`Vagranfile`æ–‡ä»¶æŒ‡å‘çš„è™šæ‹Ÿæœºã€‚

è¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šå»æ‰§è¡Œ `provision.sh` æ–‡ä»¶ï¼Œå¸®æˆ‘ä»¬æŒ‡å®š Python ç‰ˆæœ¬å¹¶å®‰è£…ä¾èµ–ï¼Œä»¥åŠåˆå§‹åŒ–æ•°æ®åº“ã€‚å½“çœ‹åˆ°å¦‚ä¸‹ç•Œé¢æ—¶ï¼Œè¯´æ˜è™šæ‹Ÿæœºå·²å¯åŠ¨æˆåŠŸã€‚

![](./img/56.png)

æ­¤æ—¶æ‰“å¼€  `Virtualbox` å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¹‹å‰æ·»åŠ çš„ `ubuntu18` å¹¶ä¸”æ­£åœ¨è¿è¡Œä¸­ã€‚

![](./img/38.png)

> å¦‚æœä½ é‡åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š
>
> ![image-20211127131651010](/Users/bot/Desktop/code/work/python/django/django-twitter/tutorial_pdf/å¼€å‘ç¯å¢ƒæ­å»ºä¸é¡¹ç›®åˆå§‹åŒ–æ•™ç¨‹/vagrantç‰ˆæœ¬/img/image-20211127131651010.png)
>
> åŸå› å¯èƒ½æ˜¯æ–°ç‰ˆæœ¬çš„ virtualbox æ”¹äº†ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ Vagrantfile ä¸­çš„é…ç½®æ¥è§£å†³ï¼š
>
> æŠŠ `33` æ”¹ä¸º `56`
>
> ![image-20211127131911927](/Users/bot/Desktop/code/work/python/django/django-twitter/tutorial_pdf/å¼€å‘ç¯å¢ƒæ­å»ºä¸é¡¹ç›®åˆå§‹åŒ–æ•™ç¨‹/vagrantç‰ˆæœ¬/img/image-20211127131911927.png)
>
> 
>
> ```bash
> Stderr: VBoxManage.exe: error: A NAT rule of this name already exists
> VBoxManage.exe: error: Details: code E_INVALIDARG (0x80070057), component NATEngineWrap, interface INATEngine, callee IUnknown
> VBoxManage.exe: error: Context: "AddRedirect(Bstr(strName).raw(), proto, Bstr(strHostIp).raw(), RTStrToUInt16(strHostPort), Bstr(strGuestIp).raw(), RTStrToUInt16(strGuestPort))" at line 1911 of file VBoxManageModifyVM.cpp
> ```
>
> å¦‚æœä½ åœ¨å¼€æœºè¿‡ç¨‹ä¸­é‡åˆ°å¦‚ä¸ŠğŸ‘†é”™è¯¯ï¼Œé‡å¯ä¸€ä¸‹ç”µè„‘å³å¯è§£å†³ã€‚
>
> macç”¨æˆ·çš„è¯ï¼Œä¹Ÿå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤è§£å†³ï¼š
>
> ```bash
> sudo "/Library/Application Support/VirtualBox/LaunchDaemons/VirtualBoxStartup.sh" restart
> ```
> å¦‚æœé‡åˆ°å¦‚ä¸‹é”™è¯¯ï¼š
>
> ```bash
> sudo: VirtualBoxStartup.sh: command not found
> ```
>
> å¯ä»¥æ”¹ç”¨ï¼š
>
> ```bash
> cd /Library/Application Support/VirtualBox/LaunchDaemons
> sudo "./VirtualBoxStartup.sh" restart
> ```
>
> ä¹Ÿå¯èƒ½è¿˜ä¼šé‡åˆ°å…¶ä»–é—®é¢˜ï¼š
>
> - å¦‚æœæ˜¯ 80 ç«¯å£è¢«å ç”¨ï¼Œé‚£å°±æ£€æŸ¥ä¸€ä¸‹è‡ªå·±çš„é˜²ç«å¢™è®¾ç½®ï¼Œæˆ–è€…æœ‰æ²¡æœ‰å…¶ä»– server ç±»çš„è½¯ä»¶å ç”¨äº†è¿™ä¸ªç«¯å£





é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥åˆ°è™šæ‹Ÿæœºå½“ä¸­ï¼š

```shell
vagrant ssh
```

è¿›å…¥è™šæ‹Ÿæœºåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç•Œé¢ï¼ˆå¯èƒ½ç•¥æœ‰ä¸åŒï¼‰

![](./img/39.png)

ç„¶åæˆ‘ä»¬å¯ä»¥ä»¥æ£€æŸ¥ä¸€ä¸‹ Python çš„ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

```shell
python --version
```

Ubuntu 18.04 é»˜è®¤çš„ Python ç‰ˆæœ¬æ˜¯ 2.7ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Python ä¸º 3.6

![](./img/40.png)

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ Django ç‰ˆæœ¬ï¼š

```shell
python -m django --version
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ Django ç‰ˆæœ¬ä¸º `requirements.txt` æ–‡ä»¶ä¸­æŒ‡å®šçš„ç‰ˆæœ¬

![](./img/41.png)

æ­¤æ—¶è®©æˆ‘ä»¬äº†çœ‹çœ‹ Ubuntu ç¯å¢ƒä¸‹çš„ç›®å½•ç»“æ„ï¼š

```shell
vagrant
â”œâ”€â”€ bionic64.box
â”œâ”€â”€ .git
â”œâ”€â”€ .gitignore 
â”œâ”€â”€ mysql-apt-config_0.8.15-1_all.deb
â”œâ”€â”€ provision.sh
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ .vagrant
â”‚Â Â  â”œâ”€â”€ bundler
â”‚Â Â  â”œâ”€â”€ machines
â”‚Â Â  â””â”€â”€ rgloader
â””â”€â”€ Vagrantfile
```

ç›¸æ¯”ä¹‹å‰å¤šäº†ä¸€ä¸ª `.vagrant` æ–‡ä»¶å¤¹ï¼Œè¿™æ˜¯åœ¨ Vagrant å¯åŠ¨åè‡ªåŠ¨ç”Ÿæˆçš„ã€‚

> .vagrant çš„ç›®å½•æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†



### 4. è™šæ‹Ÿæœºå¯åŠ¨åé…ç½®

#### a. å…è®¸è¿œç¨‹ç™»å…¥ï¼ˆå¿…é€‰ï¼‰

é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ‰“å¼€ `sshd_config` æ–‡ä»¶

```shell
sudo vim /etc/ssh/sshd_config
```

å°†æ–‡ä»¶ä¸­çš„ `PasswordAuthentication` é€‰é¡¹è®¾ç½®ä¸º `yes` ï¼Œå¹¶å»æ‰å‰é¢çš„æ³¨é‡Šã€‚



#### b. è®¾ç½®é«˜äº®æ˜¾ç¤ºï¼ˆå¯é€‰ï¼‰

é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ‰“å¼€ `.bashrc` æ–‡ä»¶

```shell
sudo vim ~/.bashrc
```

å°†æ–‡ä»¶ä¸­çš„ `force_color_prompt` é€‰é¡¹è®¾ç½®ä¸º `yes` ï¼Œå¹¶å»æ‰å‰é¢çš„æ³¨é‡Šã€‚



#### c. æ›´æ¢è½¯ä»¶æºï¼ˆå›½å¤–ç”¨æˆ·ä¸é€‰ï¼‰

å¦‚æœæ˜¯å›½å†…çš„ç”¨æˆ·ï¼Œå¯ä»¥ä¿®æ”¹ä»¥ä¸‹ `APT` åŒ…ç®¡ç†å™¨çš„è½¯ä»¶æºï¼Œå¯ä»¥åŠ é€Ÿè½¯ä»¶çš„å®‰è£…å’Œä¸‹è½½ã€‚

- **å¤‡ä»½æºåˆ—è¡¨**

  Ubuntu é…ç½®çš„é»˜è®¤æºå¹¶ä¸æ˜¯å›½å†…çš„æœåŠ¡å™¨ï¼Œä¸‹è½½æ›´æ–°è½¯ä»¶éƒ½æ¯”è¾ƒæ…¢ã€‚é¦–å…ˆå¤‡ä»½æºåˆ—è¡¨æ–‡ä»¶ `sources.list`ï¼š

  ```shell
  sudo cp /etc/apt/sources.list /etc/apt/sources.list.backup
  ```

- **ä¿®æ”¹æºåˆ—è¡¨**

  ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¾‘ `sources.list` æ–‡ä»¶ï¼š

  ```shell
  sudo vim /etc/apt/sources.list
  ```

  æ‰“å¼€åçš„ `sources.list` æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š

  ![](./img/58.png)

  ç„¶åæˆ‘ä»¬å¯ä»¥å°†å…¶ä¸­çš„è½¯ä»¶æºæ›¿æ¢ä¸ºå›½å†…çš„è½¯ä»¶æºï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¸­ç§‘å¤§æºï¼š

  ```shell
  deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse
  deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse
  deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
  deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
  deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
  deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
  deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
  deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
  deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse
  deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse
  ```

ç¼–è¾‘å®Œæˆä¹‹åï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œæ›´æ–°è½¯ä»¶æº

```bash
sudo apt-get update
```



#### d. ä¿®æ”¹è™šæ‹Ÿæœºçš„ `CPU ` æ•°é‡ï¼ˆå¯é€‰ï¼‰

é€šè¿‡ `Vagrant` é…ç½®çš„è™šæ‹Ÿæœºé»˜è®¤åªç”¨äº†ä¸€ä¸ª `cpu`æ ¸å¿ƒ ï¼Œè¿™æ ·æ€§èƒ½ä¼šæ¯”è¾ƒä½ï¼Œå¯ä»¥åœ¨  `Virtualbox ` ä¿®æ”¹ã€‚

åœ¨å¯¹åº”è™šæ‹Ÿæœºå…³æœºçš„çŠ¶æ€ä¸‹ï¼Œé€‰æ‹© `è®¾ç½®` ->  `ç³»ç»Ÿ`  -> `å¤„ç†å™¨`  è°ƒèŠ‚å¤„ç†å™¨æ•°é‡ã€‚ä¸€èˆ¬éƒ½å¯ä»¥è®¾ç½®4ä¸ªCPUã€‚

> å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œå…³é—­è™šæ‹Ÿæœºï¼š
>
> ```shell
> sudo shutdown -h now
> ```

![](./img/17.png)



#### d. è¿œç¨‹ç™»å½•ï¼ˆå¯é€‰ï¼‰

é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºåï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„çš„ SSH ç»ˆç«¯è½¯ä»¶ (MobaXtermã€Termiusã€Xshellã€PuTTYã€SecureCRT) é“¾æ¥è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿæœºçš„ IP æ˜¯æˆ‘ä»¬ä¹‹å‰è®¾ç½®çš„ç§ç½‘ IP `192.168.33.10`ï¼Œç”¨æˆ·åå’Œå¯†ç é»˜è®¤æ˜¯ `vagrant`ã€‚

> æ­¤æ­¥éª¤ï¼Œå¯ä»¥ç”¨`vagrant ssh` å‘½ä»¤æ›¿ä»£ï¼Œå› æ­¤æ˜¯å¯é€‰æ“ä½œã€‚

ä¸‹é¢ç”¨ MobaXterm æ¥é“¾æ¥æˆ‘ä»¬çš„è™šæ‹Ÿæœºï¼Œé¦–å…ˆç‚¹å‡» `Session`

![](./img/42.png)

ç„¶åç‚¹å‡» `SSH`

![](./img/43.png)

æ¥ç€è¾“å…¥è™šæ‹ŸèŠ‚çš„ IPï¼Œç‚¹å‡» OK

![](./img/44.png)

æœ€åè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œå³å¯ç™»å…¥æˆåŠŸ

![](./img/45.png)

æˆåŠŸåçš„ç•Œé¢å¤§è‡´å¦‚ä¸‹æ‰€ç¤º

![](./img/46.png)

æ¥ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›å…¥ `/vagrant` ç›®å½•ä¸‹ï¼š

```shell
cd /vagrant
```

å¯ä»¥å‘ç°è™šæ‹Ÿæœºè¿™ä¸ªç›®å½•çš„ç»“æ„å’Œå®¿ä¸»æœºä¸Šçš„ `django-twitter` çš„ç›®å½•ç»“æ„æ˜¯ä¸€æ ·çš„ã€‚

**è™šæ‹Ÿæœºï¼š**

![](./img/47.png)

**å®¿ä¸»æœºï¼š**

![](./img/48.png)



### 5.ä½ éœ€è¦äº†è§£çš„ä¸€äº›ç»†èŠ‚

![å…±äº«æ–‡ä»¶å¤¹](./img/300.png)



#### å…³äºç«¯å£æ˜ å°„

ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬åœ¨ç‰©ç†æœºä¸Šè°ƒè¯•ï¼Œå°†ç‰©ç†æœºçš„ 80 ç«¯å£æ˜ å°„åˆ°è™šæ‹Ÿæœºçš„ 8000 ç«¯å£ã€‚

80 ç«¯å£æ˜¯ HTTP ç«¯å£

8000 ç«¯å£æ˜¯ Django  WSGI SERVER ä½¿ç”¨çš„ç«¯å£ï¼Œç”¨äºè¿è¡Œè°ƒè¯•

åšäº†ç«¯å£æ˜ å°„ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç‰©ç†æœºçš„æµè§ˆå™¨è®¿é—® `localhost` å°±å¯ä»¥è®¿é—®è™šæ‹Ÿæœºä¸­çš„ Django æœåŠ¡ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æŠŠ `localhost` è½¬æˆäº† `192.168.33.10:8000`



#### å…³äºå…±äº«æ–‡ä»¶å¤¹

é€šè¿‡ä½¿ç”¨ vagrantï¼Œä¼šåœ¨ç‰©ç†æœºå’Œè™šæ‹Ÿæœºä¹‹é—´å»ºç«‹èµ·ä¸€ä¸ªå…±äº«é€šé“ï¼Œè¿æ¥æˆ‘ä»¬ç‰©ç†æœº Vagrantfile æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹å’Œ è™šæ‹Ÿæœºçš„ /vagrant æ–‡ä»¶å¤¹ï¼ˆæ˜¯/vagrantï¼Œä¸æ˜¯ï½/vagrantå“¦ï¼‰

è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç‰©ç†æœºä½¿ç”¨ pycharm å¯è§†åŒ–å¼€å‘ï¼Œè€Œæ˜¯éœ€è¦åœ¨è™šæ‹Ÿæœºçš„æ–‡æœ¬å‘½ä»¤è¡Œç•Œé¢å¼€å‘ã€‚è€Œpythonè§£é‡Šå™¨ã€djangoã€mesqlç­‰ç­‰å·¥å…·éƒ½æ˜¯è£…åœ¨è™šæ‹Ÿæœºä¸­çš„ï¼Œå¼€å‘ç¯å¢ƒå’Œæˆ‘ä»¬çš„ç‰©ç†æœºåšäº†å¾ˆå¥½çš„éš”ç»ã€‚





## æäº¤ä»£ç 

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ç”¨ Vagrant å°†å¼€å‘ç¯å¢ƒæ­å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å…ˆå°†è¿™äº›æ–‡ä»¶æäº¤åˆ°æˆ‘ä»¬çš„ä»£ç ä»“åº“å§ã€‚

> ç¡®ä¿æ­¤æ—¶çš„`.gitignore`æ–‡ä»¶çš„å¼€å¤´æ˜¯è¿™æ ·ã€‚åƒä¸‡ä¸è¦æŠŠ`bionic64.box`æ–‡ä»¶æäº¤ä¸Šå»ï¼Œ400å¤šMBå¤ªå¤§äº†ã€‚	`.vagrant`æ–‡ä»¶å¤¹æ— æ‰€è°“ï¼Œæäº¤ä¹Ÿè¡Œï¼Œä¸æäº¤ä¹Ÿè¡Œã€‚
>
> ![](./img/106.png)

é¦–å…ˆæˆ‘ä»¬å¯ä»¥å…ˆç”¨å®¿ä¸»æœºä¸Šçš„ Git Bash æŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬æœ¬åœ°ä»£ç ä»“åº“çš„çŠ¶æ€ï¼š

```shell
git status
```

æœ¬åœ°ä»“åº“çš„çŠ¶æ€å¦‚ä¸‹å›¾æ‰€ç¤º

![](./img/59.png)

å¯ä»¥çœ‹åˆ°å½“å‰æˆ‘ä»¬æ‰€åœ¨çš„åˆ†æ”¯æ˜¯ `main` åˆ†æ”¯ï¼Œå¹¶ä¸”æç¤ºæœ‰å››ä¸ªæ–‡ä»¶å¯ä»¥æäº¤ã€‚

> ä¸ºä»€ä¹ˆåªæç¤ºå››ä¸ªæ–‡ä»¶éœ€è¦æäº¤å‘¢ï¼Ÿå› ä¸ºåœ¨æˆ‘ä»¬çš„ `.gitignore ` æ–‡ä»¶ä¸­è§„å®šäº†å“ªäº›æ–‡ä»¶ä¼šè¢«å¿½ç•¥ï¼Œæ¯”å¦‚å½“å‰è·¯å¾„ä¸‹çš„ `.vagrant` æ–‡ä»¶å¤¹ã€å’Œä»¥ `.box` ç»“å°¾çš„æ–‡ä»¶ç­‰ã€‚

æˆ‘ä»¬åœ¨åšå¼€å‘æ—¶ä¸ä¼šåœ¨ä¸»åˆ†æ”¯ä¸‹å¼€å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ–°å»ºä¸€ä¸ªåˆ†æ”¯ `1-initial-vagrant`

```shell
git checkout -b 1-initial-vagrant
```

å¦‚ä¸‹å›¾æ‰€ç¤º

![](./img/60.png)

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°åˆ†æ”¯å¹¶åˆ‡æ¢åˆ°äº†æ–°åˆ†æ”¯ä¸Šã€‚ç„¶åæˆ‘ä»¬å°†å½“å‰è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒºï¼š

```shell
git add .
```

ç„¶åå†æ¬¡æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„çŠ¶æ€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![](./img/61.png)

å¯ä»¥çœ‹åˆ°åŸå…ˆçš„å››ä¸ªæ–‡ä»¶å…¨éƒ¨éƒ½æäº¤åˆ°äº†æš‚å­˜åŒºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æŠŠæ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼š

```shell
git commit -m "initial vagrant"
```

å¦‚ä¸‹å›¾æ‰€ç¤º

![](./img/62.png)

å†æ¬¡æŸ¥çœ‹æœ¬åœ°ä»“åº“æ—¶ï¼Œå‘ç°å·²ç»æ²¡æœ‰æ–‡ä»¶éœ€è¦æäº¤ï¼Œæ¥ç€æˆ‘ä»¬æŠŠæœ¬åœ°ä»“åº“çš„æ›´ç»†æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå³æˆ‘ä»¬çš„ GitHub ä»“åº“ï¼š

```shell
git push -u origin 1-initial-vagrant
```

å¦‚ä¸‹å›¾æ‰€ç¤º

![](./img/64.png)

çœ‹åˆ°ä¸Šå›¾çš„ä¿¡æ¯ï¼Œè¯´æ˜æˆ‘ä»¬çš„ä»£ç æ¨é€æˆåŠŸäº†ã€‚æ¥ç€æˆ‘ä»¬æ¥åˆ° github é¡µé¢æäº¤ä¸€ä¸ª pull request (ç®€ç§° PR)ã€‚

![](./img/65.png)

ç‚¹å‡»åˆ›å»º PR åï¼Œæˆ‘ä»¬éœ€è¦å¡«å†™ä¸€ä¸‹ä½ æäº¤ PR çš„ç›®çš„ã€‚

![](./img/66.png)

å¡«å†™å®Œç›¸å…³çš„ä¿¡æ¯åï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»å³ä¸‹è§’çš„ Create pull requestã€‚

![](./img/67.png)

åœ¨ä¸Šå›¾æ‰€ç¤ºçš„ç•Œé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æµè§ˆæˆ‘ä»¬æäº¤çš„ PRï¼Œæ¯”å¦‚æˆ‘ä»¬ç‚¹å‡» Files changesï¼Œå¯ä»¥æŸ¥çœ‹æˆ‘ä»¬æ”¹åŠ¨çš„ä»£ç ã€‚

![](./img/68.png)

ä¸Šå›¾æ‰€ç¤ºçš„æ“ä½œæˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸º review ä»£ç ï¼Œå½“ç¡®è®¤ä½ çš„ä»£ç æ— è¯¯åï¼Œå°±å¯ä»¥ merge äº†ã€‚ç‚¹å‡» Merge pull request æŒ‰é’®ï¼Œä½ æäº¤çš„ä»£ç å°±åˆå¹¶åˆ°äº†ä¸»åˆ†æ”¯å½“ä¸­äº†ã€‚

![](./img/69.png)



## åˆå§‹åŒ–é¡¹ç›®

> æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šåœ¨ä¸¤ä¸ªåœ°æ–¹æ‰§è¡Œæˆ‘ä»¬çš„å‘½ä»¤ï¼ŒGit å’Œ Vagrant çš„å‘½ä»¤æˆ‘ä»¬é€šå¸¸ä¼šåœ¨ Git Bash ä¸­æ‰§è¡Œï¼ŒDjango å’Œ Linux å‘½ä»¤æˆ‘ä»¬ä¼šåœ¨ MobaXterm ä¸­æ‰§è¡Œã€‚

### 1. åˆ›å»ºé¡¹ç›®

æ¥ä¸‹æ¥æˆ‘ä»¬è¦å¼€å§‹ä»é›¶å¼€å§‹åˆ›å»ºä¸€ä¸ªé¡¹ç›®äº†ï¼Œåœ¨æ­¤ä¹‹å‰æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ `2-initial-django` ï¼Œä½¿ç”¨å®¿ä¸»æœºä¸Šçš„ Git Bash

![](./img/70.png)

ç„¶ååœ¨ MobaXterm ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º `twitter` çš„é¡¹ç›®ï¼š

```shell
django-admin startproject twitter .
```
> django å®‰è£…åœ¨ è™šæ‹Ÿæœºä¸­è€Œä¸æ˜¯ç‰©ç†æœºï¼Œæ‰€ä»¥ï¼Œè¦ä½¿ç”¨ `django-admin` å¿…é¡»è¦åœ¨è™šæ‹Ÿæœºçš„ç¯å¢ƒä¸‹æ‰§è¡Œã€‚
>
> åˆ›å»ºçš„å·¥ç¨‹æ˜¯åœ¨`/vagrant`æ–‡ä»¶å¤¹ä¸‹ï¼Œä¸æ˜¯`/home/vagrant`å“¦ã€‚
>
> ä¸è¦å¿˜è®°åé¢æœ‰ä¸€ä¸ª `.` ç‚¹å“¦ã€‚

![](./img/71.png)

æ­¤æ—¶çš„ä»£ç ç»“æ„ä¸ºï¼š

```shell
vagrant
â”œâ”€â”€ bionic64.box
â”œâ”€â”€ .git
â”œâ”€â”€ .gitignore
â”œâ”€â”€ manage.py
â”œâ”€â”€ mysql-apt-config_0.8.15-1_all.deb
â”œâ”€â”€ provision.sh
â”œâ”€â”€ README.md
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ twitter
â”‚Â Â  â”œâ”€â”€ asgi.py
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ settings.py
â”‚Â Â  â”œâ”€â”€ urls.py
â”‚Â Â  â””â”€â”€ wsgi.py
â”œâ”€â”€ .vagrant
â””â”€â”€ Vagrantfile
```

å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ª `twitter` æ–‡ä»¶å¤¹å’Œ `manage.py` æ–‡ä»¶ã€‚

### 2. ä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶

æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®¿ä¸»æœºä¸Šçš„ PyCharm æ‰“å¼€ `django-twitter` ç›®å½•ï¼Œå¹¶ä¿®æ”¹ `twitter/settings.py` æ–‡ä»¶ï¼Œ

![](./img/72.png)

å°†å…¶ `DATABASES` é…ç½®ä¿¡æ¯ä¸ºè™šæ‹Ÿæœºä¸Šçš„ MySQL:

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'twitter',
        'HOST': '0.0.0.0',
        'PORT': '3306',
        'USER': 'root',
        'PASSWORD': 'yourpassword',    # è¿™é‡Œæ˜¯è‡ªå·±ä¸‹è½½mysqlæ—¶å€™è¾“å…¥ä¸¤æ¬¡çš„é‚£ä¸ªå¯†ç 
    }
}
```

ä¿®æ”¹ `ALLOWED_HOST ` é…ç½®ä¿¡æ¯ï¼š

```python
ALLOWED_HOSTS = ['127.0.0.1', '192.168.33.10', 'localhost']
```



### 3. æ‰§è¡Œæ•°æ®è¿ç§»

é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ‰§è¡Œæ•°æ®è¿ç§»

```shell
python manage.py migrate
```

> æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºä¸­çš„ python ï¼Œæ‰€ä»¥è¯¥å‘½ä»¤è¦åœ¨è™šæ‹Ÿæœºçš„ç¯å¢ƒä¸­æ‰§è¡Œ

çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼Œè¯´æ˜æ‰§è¡ŒæˆåŠŸ

![](./img/49.png)

> å¦‚æœåœ¨æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­å‡ºç°`django.db.utils.OperationalError: (1045, "Access denied for user 'root'@'localhost' (using password: YES)")`ç±»ä¼¼çš„é”™è¯¯ã€‚å¯ä»¥æ£€æŸ¥ä¸€ä¸ªMysqlçš„å¯†ç å’Œé¡¹ç›® `twitter/settings.py`ä¸­çš„è®¾ç½®çš„æ•°æ®åº“å¯†ç æ˜¯å¦ä¸€è‡´ã€‚
>
> è¿ç§»å®Œæˆä¹‹åä½ å¯ä»¥åœ¨è™šæ‹Ÿæœºçš„ç»ˆç«¯è¾“å…¥ `mysql -u root -p"yourpassword"` ç™»å½• mysql æŸ¥çœ‹è¿ç§»åçš„è¡¨å•

### 4. ä¿®æ”¹ provision.sh æ–‡ä»¶å¹¶æ‰§è¡Œ

ä¿®æ”¹ `provision.sh` æ–‡ä»¶ï¼Œæ–°å¢äº†51~68è¡Œçš„å†…å®¹ï¼š

```bash
#!/usr/bin/env bash

echo 'Start!'

sudo update-alternatives --install /usr/bin/python python /usr/bin/python3.6 2

cd /vagrant

sudo apt-get update
sudo apt-get install tree

# å®‰è£…é…ç½®mysql8
if ! [ -e /vagrant/mysql-apt-config_0.8.15-1_all.deb ]; then
	wget -c https://dev.mysql.com/get/mysql-apt-config_0.8.15-1_all.deb
fi

sudo dpkg -i mysql-apt-config_0.8.15-1_all.deb
sudo DEBIAN_FRONTEND=noninteractivate apt-get install -y mysql-server
sudo apt-get install -y libmysqlclient-dev

if [ ! -f "/usr/bin/pip" ]; then
  sudo apt-get install -y python3-pip
  sudo apt-get install -y python-setuptools
  sudo ln -s /usr/bin/pip3 /usr/bin/pip
else
  echo "pip3 å·²å®‰è£…"
fi

# å‡çº§pipï¼Œç›®å‰å­˜åœ¨é—®é¢˜ï¼Œread timed outï¼Œçœ‹è„¸ï¼Œæœ‰æ—¶å€™å¯ä»¥ï¼Œä½†å¤§å¤šæ—¶å€™ä¸è¡Œ
# python -m pip install --upgrade pip
# æ¢æºå®Œç¾è§£å†³
# å®‰è£…pipæ‰€éœ€ä¾èµ–
pip install --upgrade setuptools -i https://pypi.tuna.tsinghua.edu.cn/simple
pip install --ignore-installed wrapt -i https://pypi.tuna.tsinghua.edu.cn/simple
# å®‰è£…pipæœ€æ–°ç‰ˆ
pip install -U pip -i https://pypi.tuna.tsinghua.edu.cn/simple
# æ ¹æ® requirements.txt é‡Œçš„è®°å½•å®‰è£… pip packageï¼Œç¡®ä¿æ‰€æœ‰ç‰ˆæœ¬ä¹‹é—´çš„å…¼å®¹æ€§
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple


# è®¾ç½®mysqlçš„rootè´¦æˆ·çš„å¯†ç ä¸ºyourpassword
# åˆ›å»ºåä¸ºtwitterçš„æ•°æ®åº“
sudo mysql -u root << EOF
	ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'yourpassword';
	flush privileges;
	show databases;
	CREATE DATABASE IF NOT EXISTS twitter;
EOF
# fi

# superuseråå­—
USER="admin"
# superuserå¯†ç 
PASS="admin"
# superuseré‚®ç®±
MAIL="admin@twitter.com"
script="
from django.contrib.auth.models import User;
username = '$USER';
password = '$PASS';
email = '$MAIL';
if not User.objects.filter(username=username).exists():
    User.objects.create_superuser(username, email, password);
    print('Superuser created.');
else:
    print('Superuser creation skipped.');
"
printf "$script" | python manage.py shell


# å¦‚æœæƒ³ç›´æ¥è¿›å…¥/vagrantè·¯å¾„ä¸‹
# è¯·è¾“å…¥vagrant sshå‘½ä»¤è¿›å…¥
# æ‰‹åŠ¨è¾“å…¥
# è¾“å…¥ls -a
# è¾“å…¥ vi .bashrc
# åœ¨æœ€ä¸‹é¢ï¼Œæ·»åŠ cd /vagrant

echo 'All Done!'
```

æ³¨æ„1:

> æ­¤å¤„éœ€è¦æ³¨æ„ï¼šé¡¹ç›®çš„ settings.py ä¸­é…ç½®çš„ Mysql å¯†ç è¦å’Œæˆ‘ä»¬ provision.sh ä¸­é…ç½®çš„å¯†ç ä¸€æ ·
>
> æ¯”å¦‚ provision.sh è„šæœ¬é€šè¿‡å¦‚ä¸‹è¯­å¥ï¼š `ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'yourpassword';` å°† Mysqlçš„å¯†ç è®¾ä¸º yourpasswordï¼Œé‚£ä½ è¦ä¿æŒ seetings.py æ–‡ä»¶ä¸­çš„ Mysql å¯†ç ä¹Ÿæ˜¯è¿™ä¸€ä¸ªã€‚
>


æ³¨æ„2:
> å¦‚æœå‡ºç° `ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)` è¿™æ ·çš„é”™è¯¯ï¼Œæ˜¯å› ä¸ºä½ çš„é¡¹ç›®çš„settings.py æ–‡ä»¶ä¸­é…ç½®çš„æ•°æ®åº“å¯†ç å’Œæ•°æ®åº“çš„å®é™…å¯†ç ä¸ä¸€è‡´ï¼Œæ•°æ®åº“ root é»˜è®¤å¯†ç æ˜¯ yourpasswordï¼Œå»ä¿®æ”¹ä¸€ä¸‹ `twitter/settings.py` æ–‡ä»¶ä¸­ `DATABASES` ç›¸å…³çš„å¯†ç é€‰é¡¹
>
> TIPSï¼šæˆ‘ä»¬ç”¨çš„æ˜¯è™šæ‹Ÿæœºä¸­çš„ Mysqlï¼Œå’Œç‰©ç†æœºæ²¡å…³ç³»

æ–­å¼€è™šæ‹Ÿæœºè¿æ¥ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é‡æ–°æ‰§è¡Œè„šæœ¬ï¼š

```shell
vagrant provision
```

> Vagrant æ˜¯å®‰è£…ç‰©ç†æœºä¸­ï¼Œæ‰€ä»¥è¦æ‰§è¡Œè¿™ä¸ªè™šæ‹Ÿæœºä¸­æ‰§è¡Œè¯¥å‘½ä»¤ã€‚
>
> ä½†æ˜¯ä¸è¦å…³é—­è™šæ‹Ÿæœºå“¦ï¼Œæ–­å¼€è™šæ‹Ÿæœºè¿æ¥åªæ˜¯ä¸ºäº†åœ¨ç‰©ç†æœºçš„ç¯å¢ƒä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œä½ ä¹Ÿå¯ä»¥é‡å¼€ä¸€ä¸ªç‰©ç†æœºçš„çš„ç»ˆç«¯çª—å£ï¼Œæˆ–è€…åœ¨è™šæ‹Ÿæœºçš„ç»ˆç«¯ä¸­è¾“å…¥ exit å°±ä¼šå›é€€åˆ°ç‰©ç†æœºçš„ç»ˆç«¯ã€‚

è¡¥å……ä¸€äº› provision çŸ¥è¯†ï¼š

> å› ä¸ºæˆ‘ä»¬åœ¨ `Vagrantfile` æ–‡ä»¶ä¸­é…ç½®äº† `config.vm.provision :shell, path: "provision.sh"`ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¿è¡Œ `vagrant up` å‘½ä»¤çš„æ—¶å€™ ï¼Œvagrant ä¼šè‡ªåŠ¨æ‰§è¡Œ `vagrant provision` å‘½ä»¤è·‘ä¸€è¾¹ `provision.sh` è„šæœ¬ä¸­å†…å®¹ã€‚è¿™åªé™äºç¬¬ä¸€æ¬¡å¼€æœºçš„æ—¶å€™ï¼ˆç¬¬ä¸€æ¬¡å¼€æœºä¹‹å‰é¡¹ç›®æ ¹ä¸­æ²¡æœ‰ `.vagrant` æ–‡ä»¶å¤¹ï¼Œå¼€æœºä¹‹åå°±ä¼šç”Ÿæˆï¼Œæ‰€ä»¥ï¼Œå½“ä½ ç¬¬ n æ¬¡å¼€æœºæƒ³å½“ä½œç¬¬ä¸€æ¬¡å¼€æœºçš„è¯ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹åˆ æ‰ï¼‰ï¼Œç¬¬äºŒæ¬¡ã€ç¬¬ä¸‰æ¬¡å¼€æœºç­‰ç­‰éƒ½ä¸ä¼šåœ¨è‡ªåŠ¨å»æ‰§è¡Œè¿™ä¸ª  `provision.sh` è„šæœ¬ï¼Œéœ€è¦æ‰‹åŠ¨ä½¿ç”¨ `vagrant provision` æ‰§è¡Œå“¦

### 5. è¿è¡Œé¡¹ç›®

å¥½äº†ï¼Œè®©æˆ‘ä»¬æ¥è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®å§ï¼è®©å®ƒè·‘èµ·æ¥å¯ä»¥è¢«æˆ‘ä»¬çš„æµè§ˆå™¨è®¿é—®åˆ°ã€‚è¿è¡Œé¡¹ç›®ä½¿ç”¨è¿‡ python è°ƒç”¨ manage.py æ–‡ä»¶ å¹¶é…ç½®ç›¸åº”çš„ runserver å‚æ•°ã€‚

æˆ‘ä»¬å¯ä»¥åœ¨è™šæ‹Ÿæœºçš„ç»ˆç«¯ç›´æ¥é€šè¿‡å‘½ä»¤æ¥è¿è¡Œé¡¹ç›®ï¼Œä¹Ÿå¯ä»¥åœ¨Pycharm ä¸­é€šè¿‡ç‚¹æŒ‰é’®çš„æ–¹å¼æ¥è¿è¡Œé¡¹ç›®ã€‚



#### **åœ¨è™šæ‹Ÿæœºç»ˆç«¯ä¸Šè¿è¡Œé¡¹ç›®**

æˆ‘ä»¬é‡æ–°è¿æ¥è™šæ‹Ÿæœºï¼Œè¿›å…¥ `/vagrant` ç›®å½•ï¼Œå¹¶æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œè¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ï¼š

```shell
python manage.py runserver 0.0.0.0:8000
```

> æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºä¸­çš„ python ï¼Œæ‰€ä»¥è¯¥å‘½ä»¤è¦åœ¨è™šæ‹Ÿæœºçš„ç¯å¢ƒä¸­æ‰§è¡Œ

å¦‚æœè¿è¡ŒæˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç”»é¢

![](./img/50.png)

åœ¨å®¿ä¸»æœºçš„æµè§ˆå™¨ä¸­è¾“å…¥ `localhost`ï¼Œå¯ä»¥çœ‹åˆ° Django å¯åŠ¨æˆåŠŸçš„ç•Œé¢

![](./img/51.png)



æŒ‰ä¸‹ ctrl+c æ¥ç»“æŸ Django æœåŠ¡å§ï¼Œmacä¸‹æ˜¯control+c



#### **åœ¨Pycharmä¸Šè¿è¡Œé¡¹ç›®**

å¦‚æœåœ¨è™šæ‹Ÿæœºçš„ç»ˆç«¯ä¸Šè¾“å…¥è¿è¡Œå‘½ä»¤è§‰å¾—å¤ªéº»çƒ¦çš„è¯ï¼Œå¯ä»¥é€šè¿‡ Pycharm æ¥è¿è¡Œï¼Œï¼ˆPycharm èƒŒåä¹Ÿæ˜¯é€šè¿‡è¾“å…¥ python manage.py runserver ï¼Œä½†æ˜¯ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è¾“å…¥äº†ï¼Œç‚¹ä¸€ä¸‹æŒ‰é’®å°±è¡Œäº†ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ PyCharm ä¸Šé…ç½®ä¸€ä¸‹ Vagrant çš„ Python è§£é‡Šå™¨ã€‚é¦–å…ˆç‚¹å‡»â€œå°æ‰³æ‰‹â€æŒ‰é’®ï¼Œç„¶ååœ¨å·¦ä¾§ç‚¹å‡» â€œPython Interpreterâ€ æŒ‰é’®ï¼Œåœ¨å³ä¾§çº¢æ¡†çš„ä½ç½®ç‚¹å‡»â€œå°é½¿è½®â€æŒ‰é’®ï¼Œç„¶åç‚¹å‡»â€œAddâ€ã€‚

![](./img/73.png)

ç„¶ååœ¨å·¦ä¾§é€‰æ‹© Vagrantï¼Œå³ä¾§ Vagrant Instance Folder é€‰æ‹© `django-twitter` æ‰€åœ¨çš„è·¯å¾„ï¼Œç„¶åç‚¹å‡» â€œOKâ€ã€‚

![](./img/74.png)

> å¦‚æœä½ è¿™é‡Œæ²¡æœ‰ `Vagrant` é€‰é¡¹ï¼Œå›åˆ°æ•™ç¨‹æœ€å¼€å¤´çœ‹çœ‹è¯´æ˜

ç„¶åå†æ¬¡ç‚¹å‡» â€œOKâ€ï¼Œè§£é‡Šå™¨é…ç½®å®Œæ¯•ã€‚

![](./img/75.png)

æ¥ç€ PyCharm ä¼šå»å¯¼å…¥è™šæ‹Ÿæœºä¸Šçš„ Python ç¯å¢ƒï¼Œè¿™å¯èƒ½éœ€è¦èŠ±ä¸€æ®µæ—¶é—´ã€‚ç­‰å¯¼å…¥ç»“æŸåï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹ Run/Debug è¿›è¡Œé…ç½®ï¼Œé¦–å…ˆç‚¹å‡» â€œAdd Configurationâ€ï¼Œç„¶åç‚¹å‡» + å·ï¼Œé€‰æ‹© â€œDjango Serverâ€ã€‚

![](./img/76.png)

æ¥ç€é…ç½® â€œNameâ€ å’Œ â€œHostâ€ï¼Œç„¶åå¯èƒ½éœ€è¦ä¿®å¤ä¸€ä¸‹ Django ä¾èµ–ï¼Œç‚¹å‡» â€œFixâ€ã€‚

> è¿™é‡Œçš„ Host è®¾ä¸º `0.0.0.0` å¾ˆé‡è¦ï¼Œåƒä¸‡åˆ«å¿˜äº†ç‚¹åº”ç”¨ï¼Œä¸ç„¶ä¸ä¼šç”Ÿæ•ˆ

![](./img/77.png)

é¦–å…ˆå‹¾é€‰ â€œEnable Django Supportâ€ï¼Œç„¶åæŒ‡å®š Django çš„æ ¹ç›®å½•å’Œ `settings.py` æ‰€åœ¨çš„è·¯å¾„ï¼Œç‚¹å‡» â€œOKâ€ã€‚

![](./img/78.png)

ç„¶åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ PyCharm æ¥è¿è¡Œæˆ‘ä»¬çš„é¡¹ç›®ä»£ç äº†ï¼Œç‚¹å‡»ç»¿è‰²çš„ä¸‰è§’å½¢

![](./img/79.png)

å¦‚æœä½ çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼Œå°±è¯´æ˜é¡¹ç›®è¿è¡ŒæˆåŠŸäº†ã€‚

![](./img/80.png)

> æ³¨æ„ï¼Œå¦‚æœä½ é‚£é‡Œæ˜¾ç¤ºçš„æ˜¯ `Starting development server at http://127.0.0.1:8000/`ï¼Œè¯´æ˜ä½ å‰é¢çš„ HOST æ²¡æœ‰è®¾ç½®å¥½

æ¥ç€åœ¨å®¿ä¸»æœºçš„æµè§ˆå™¨ä¸­è¾“å…¥ `localhost`ï¼ŒåŒæ ·å¯ä»¥çœ‹åˆ° Django å¯åŠ¨æˆåŠŸçš„ç•Œé¢

![](./img/51.png)

ç°åœ¨åˆå§‹åŒ– Django é¡¹ç›®å®Œæˆäº†ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦æŠŠä»£ç æ›´æ–°åˆ° github ä¸Šã€‚

> å¦‚æœæ­¤å¤„ä½ ä¸èƒ½é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œæ˜¾ç¤º `ERRORï¼šThat port is already in use` ï¼Œé‚£è¯´æ˜ä½ æ²¡æœ‰æŠŠä¹‹å‰åœ¨è™šæ‹Ÿæœºç»ˆç«¯ä¸­è·‘èµ·æ¥çš„é¡¹ç›®å…³åœã€‚é‚£ä¸ªè¿è¡Œç›‘å¬äº† 8000ï¼Œä½ åˆåœ¨ pycharm ä¸­å†æ¬¡è¿è¡Œï¼ŒåŒæ ·ç›‘å¬8000 ç«¯å£å°±å†²çªäº†ã€‚æŠŠåŸæ¥é‚£ä¸ªå…³æ‰å§ï¼ï¼ˆå°±æ˜¯åœ¨å‘½ä»¤è¡Œå¯åŠ¨çš„é‚£ä¸ªDjangoæœåŠ¡ï¼‰

## æ¥å…¥ Django Rest Framework

### 1. å¢åŠ ä¾èµ–

é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹ `requirements.txt` æ–‡ä»¶ï¼Œå¢åŠ ç¬¬ä¸‰æ–¹åº“ `djangorestframework` ã€‚

![](./img/81.png)

æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å®‰è£… `djangorestframework` ï¼Œæœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š

- **åœ¨ PyCharm ä¸­å®‰è£…**

  å½“åœ¨ `requirements.txt` æ–‡ä»¶ä¸­æ–°å¢ä¸€ä¸ªä¾èµ–æ—¶ï¼ŒPyCharm ä¼šéå¸¸æ™ºèƒ½åœ°æç¤ºä½ å»å®‰è£…è¿™ä¸ªä¾èµ–ã€‚

  ![](./img/85.png)

  æˆ–è€…åœ¨ä½ å»è°ƒç”¨è¿™ä¸ªä¾èµ–æ—¶ï¼Œä¼šæç¤ºä½ å®‰è£…

  ![](./img/90.png)

- **åœ¨ Vagrant ä¸­å®‰è£…**

  æˆ‘ä»¬å¯ä»¥åœ¨è™šæ‹Ÿæœºä¸­ç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

  ```shell
  pip install -r requirements.txt
  ```
  
  > æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºä¸­çš„ pip ï¼Œæ‰€ä»¥è¯¥å‘½ä»¤è¦åœ¨è™šæ‹Ÿæœºçš„ç¯å¢ƒä¸­æ‰§è¡Œ



  ![](./img/86.png)

å®‰è£…å®Œä¾èµ–åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ `settings.py` æ–‡ä»¶ä¸­è¿›è¡Œä¸€äº›ä¿®æ”¹**ï¼ˆæ³¨æ„åœ¨å¼€å§‹æ–°çš„å¼€å‘å·¥ä½œä¹‹å‰ï¼Œä¸€å®šè¦åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¸€å®šè¦åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼Œä¸€å®šè¦åˆ›å»ºæ–°çš„åˆ†æ”¯ï¼é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼‰**ã€‚

![](./img/89.png)

> ä¸€å®šè¦ç¡®ä¿ `settings.py` æ–‡ä»¶ä¸­çš„ `INSTALLED_APPS` ä¸­é…ç½®äº† `'rest_framework'` ï¼Œå¦åˆ™ä¹‹åè®¿é—®é¡µé¢æ˜¯ä¼šå‡ºç° `TemplateDoesNotExist` çš„é”™è¯¯ã€‚

![](./img/91.png)



### 2. æ–°å¢ app â€” accounts

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–°å»ºä¸€ä¸ª appï¼š

```shell
python manage.py startapp accounts
```

> æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºä¸­çš„ python ï¼Œæ‰€ä»¥è¯¥å‘½ä»¤è¦åœ¨è™šæ‹Ÿæœºçš„ç¯å¢ƒä¸­æ‰§è¡Œ

å¯ä»¥çœ‹åˆ°åœ¨å½“å‰è·¯å¾„ä¸‹ï¼Œå¤šäº†ä¸€ä¸ª `accounts` çš„æ–‡ä»¶å¤¹ã€‚

![](./img/87.png)

ç„¶åæˆ‘ä»¬ä¼šåœ¨ `accounts` æ–‡ä»¶å¤¹ä¸‹å¯¹é»˜è®¤ç”Ÿæˆçš„ç›®å½•ç»“æ„è¿›è¡Œä¸€äº›æ”¹åŠ¨ï¼Œé¦–å…ˆåœ¨ `accounts` æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ `api` ï¼Œç”¨äºå­˜æ”¾è§†å›¾ã€åºåˆ—åŒ–å™¨ç­‰æ–‡ä»¶ã€‚

å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤æ–°å»ºæ–‡ä»¶å¤¹ï¼š

```shell
cd accounts/   # é¦–å…ˆè¦è¿›å…¥ accounts ä¸­
mkdir api
```

å¯ä»¥çœ‹åˆ°åœ¨å½“å‰è·¯å¾„ä¸‹ï¼Œå¤šäº†ä¸€ä¸ª `api` æ–‡ä»¶å¤¹

![](./img/88.png)

æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ï¼Œå¯¹æˆ‘ä»¬çš„ä»£ç å°±è¡Œä¸€äº›ä¿®æ”¹ï¼Œé¦–å…ˆåœ¨ `api` æ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ª `__init__.py` æ–‡ä»¶ï¼Œè¡¨ç¤º `api` æ–‡ä»¶å¤¹æ˜¯ä¸€ä¸ªåŒ…ã€‚

```bash
cd api
> __init__.py
```

> æ³¨æ„ `__init__.py` æ˜¯å‰åä¸¤ä¸ªä¸‹åˆ’çº¿ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢ä¸éœ€è¦æœ‰å†…å®¹ï¼Œç©ºçš„å°±è¡Œï¼Œä½†æ˜¯å¿…ä¸å¯å°‘ï¼Œæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œ`api`å°±åªæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹è€Œä¸æ˜¯ä¸€ä¸ª `PythonåŒ…`

ç„¶ååœ¨ `api` æ–‡ä»¶ä¸‹å¢åŠ ä¸€ä¸ªè§†å›¾æ–‡ä»¶ `views.py`:

```python
from django.contrib.auth.models import User, Group
from rest_framework import viewsets
from rest_framework import permissions
from accounts.api.serializers import UserSerializer


class UserViewSet(viewsets.ModelViewSet):
    """
    API endpoint that allows users to be viewed or edited.
    """
    queryset = User.objects.all().order_by('-date_joined')
    serializer_class = UserSerializer
    permission_classes = [permissions.IsAuthenticated]
```

ç„¶ååœ¨ `api` æ–‡ä»¶ä¸‹å¢åŠ ä¸€ä¸ªåºåˆ—åŒ–å™¨æ–‡ä»¶ `serializers.py` ï¼š

```python
from django.contrib.auth.models import User, Group
from rest_framework import serializers


class UserSerializer(serializers.HyperlinkedModelSerializer):
    class Meta:
        model = User
        fields = ['url', 'username', 'email']
```

æœ€åæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ `twitter/urls.py` æ–‡ä»¶ï¼š

```python
from django.contrib import admin
from django.urls import include, path
from rest_framework import routers
from accounts.api import views

router = routers.DefaultRouter()
router.register(r'api/users', views.UserViewSet)

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include(router.urls)),
    path('api-auth/', include('rest_framework.urls', namespace='rest_framework')),
]
```

ä¿®æ”¹å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¿ä¸»æœºçš„æµè§ˆå™¨ç«¯è®¿é—® `localhost` ï¼Œå³å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢

![](./img/92.png)

> å¦‚æœä½ é‡åˆ°äº†å›¾ç‰‡ä¸­çš„é—®é¢˜ï¼Œå¤§æ¦‚ç‡ä½ æ²¡æœ‰è®¾ç½® 0.0.0.0 è€Œè®¾ç½® 127.0.0.1
>
> ![image-20210808165522356](./img/image-20210808165522356.png)



## å®ç°æ³¨å†Œã€ç™»å½•ã€ç™»å‡ºåŠŸèƒ½

æ¥ä¸‹æ¥æˆ‘ä»¬è¦å®ç°æ³¨å†Œã€ç™»å½•å’Œç™»å‡ºçš„åŠŸèƒ½ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæ¥ä¿®æ”¹ä¸€ä¸‹ `settings.py` æ–‡ä»¶ï¼š

```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # third party
    'rest_framework',

    # project apps
    'accounts',
]
```

å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œæˆ‘ä»¬å¢åŠ äº†ä¸€ä¸‹ä»£ç ï¼Œå¹¶å°†ä¹‹å‰åˆ›å»ºçš„åº”ç”¨æ³¨å†Œåˆ°äº† Django ä¸­ã€‚

ç„¶åæˆ‘ä»¬ä¼šä¿®æ”¹ `accounts/api/views.py` ä¸­çš„ `UserViewSet` ï¼š

```python
class UserViewSet(viewsets.ReadOnlyModelViewSet):
    """
    API endpoint that allows users to be viewed or edited.
    """
    queryset = User.objects.all().order_by('-date_joined')
    serializer_class = UserSerializer
    permission_classes = (permissions.IsAuthenticated,)
```

å¹¶ä¸”ä¿®æ”¹ `accounts/api/serializers.py` ä¸­çš„ `UserSerializer` ï¼š

```python
class UserSerializer(serializers.ModelSerializer):
    class Meta:
        model = User
        fields = ('username', 'email')
```

æ¥ä¸‹æ¥è®©æˆ‘ä»¬å¼€å§‹å†™æ³¨å†Œã€ç™»å½•ã€ç™»å‡ºå’ŒæŸ¥çœ‹ç™»å½•çŠ¶æ€çš„æ¥å£ï¼ˆAPIï¼‰å§ï¼

é¦–å…ˆæˆ‘ä»¬å…ˆå±•ç¤ºä¸€ä¸‹ `accounts/api/views.py` ä¼šå¯¼å…¥çš„åŒ…ï¼š

```python
from accounts.api.serializers import UserSerializer
from django.contrib.auth.models import User
from rest_framework import permissions
from rest_framework import viewsets
from rest_framework.response import Response
from rest_framework.decorators import action
from rest_framework.permissions import AllowAny
from django.contrib.auth import (
    authenticate as django_authenticate,
    login as django_login,
    logout as django_logout,
)
from accounts.api.serializers import SignupSerializer, LoginSerializer
```

ä»¥åŠ `accounts/api/serializers.py` ä¸­å¯¼å…¥çš„åŒ…ï¼š

```python
from django.contrib.auth.models import User
from rest_framework import serializers, exceptions
```



### 1. æ³¨å†Œ

æ¥ç€è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ª**æ³¨å†Œ**åŠŸèƒ½ï¼Œåœ¨ `accounts/api/views.py` å¢åŠ å¦‚ä¸‹ä»£ç ï¼š

```python
class AccountViewSet(viewsets.ViewSet):
    permission_classes = (AllowAny,)
    serializer_class = SignupSerializer
    
		@action(methods=['POST'], detail=False)
    def signup(self, request):
        """
        ä½¿ç”¨ username, email, password è¿›è¡Œæ³¨å†Œ
        """
        # ä¸å¤ªä¼˜é›…çš„å†™æ³•
        # username = request.data.get('username')
        # if not username:
        #     return Response("username required", status=400)
        # password = request.data.get('password')
        # if not password:
        #     return Response("password required", status=400)
        # if User.objects.filter(username=username).exists():
        #     return Response("password required", status=400)
        serializer = SignupSerializer(data=request.data)
        if not serializer.is_valid():
            return Response({
                'success': False,
                'message': "Please check input",
                'errors': serializer.errors,
            }, status=400)

        user = serializer.save()
        django_login(request, user)
        return Response({
            'success': True,
            'user': UserSerializer(user).data,
        })
```

æ³¨å†Œä¸­ç”¨åˆ°çš„ `SignupSerializer` åœ¨ `accounts/api/serializers.py` ä¸­ï¼š

```python
class SignupSerializer(serializers.ModelSerializer):
    username = serializers.CharField(max_length=20, min_length=6)
    password = serializers.CharField(max_length=20, min_length=6)
    email = serializers.EmailField()

    class Meta:
        model = User
        fields = ('username', 'email', 'password')

    def validate(self, data):
        # TODO<HOMEWORK> å¢åŠ éªŒè¯ username æ˜¯ä¸æ˜¯åªç”±ç»™å®šçš„å­—ç¬¦é›†åˆæ„æˆ
        if User.objects.filter(username=data['username'].lower()).exists():
            raise exceptions.ValidationError({
                'message': 'This email address has been occupied.'
            })
        if User.objects.filter(email=data['email'].lower()).exists():
            raise exceptions.ValidationError({
                'message': 'This email address has been occupied.'
            })
        return data

    def create(self, validated_data):
        username = validated_data['username'].lower()
        email = validated_data['email'].lower()
        password = validated_data['password']

        user = User.objects.create_user(
            username=username,
            email=email,
            password=password,
        )
        return user
```



### 2. ç™»å½•

æ¥ç€è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ª**ç™»å½•**åŠŸèƒ½ï¼Œåœ¨ `accounts/api/views.py`  ä¸­çš„ `AccountViewSet` è§†å›¾ç±»ä¸‹å¢åŠ ä¸€ä¸ª `login` æ–¹æ³•ï¼š

```python
    @action(methods=['POST'], detail=False)
    def login(self, request):
        """
        é»˜è®¤çš„ username æ˜¯ admin, password ä¹Ÿæ˜¯ admin
        """
        serializer = LoginSerializer(data=request.data)
        if not serializer.is_valid():
            return Response({
                "success": False,
                "message": "Please check input",
                "errors": serializer.errors,
            }, status=400)
        username = serializer.validated_data['username']
        password = serializer.validated_data['password']
        user = django_authenticate(username=username, password=password)
        if not user or user.is_anonymous:
            return Response({
                "success": False,
                "message": "username and password does not match",
            }, status=400)
        django_login(request, user)
        return Response({
            "success": True,
            "user": UserSerializer(instance=user).data,
        })
```

ç™»å½•ä¸­ç”¨åˆ°çš„ `LoginSerializer` åœ¨ `accounts/api/serializers.py` ä¸­ï¼š

```python
class LoginSerializer(serializers.Serializer):
    username = serializers.CharField()
    password = serializers.CharField()
```



### 3. æŸ¥çœ‹ç™»å½•çŠ¶æ€

æ¥ç€è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ª**æŸ¥çœ‹ç™»å½•çŠ¶æ€**åŠŸèƒ½ï¼Œåœ¨ `accounts/api/views.py`  ä¸­çš„ `AccountViewSet` è§†å›¾ç±»ä¸‹å¢åŠ ä¸€ä¸ª `login_status` æ–¹æ³•ï¼š

```python
    @action(methods=['GET'], detail=False)
    def login_status(self, request):
        """
        æŸ¥çœ‹ç”¨æˆ·å½“å‰çš„ç™»å½•çŠ¶æ€å’Œå…·ä½“ä¿¡æ¯
        """
        data = {'has_logged_in': request.user.is_authenticated}
        if request.user.is_authenticated:
            data['user'] = UserSerializer(request.user).data
        return Response(data)
```



### 4. ç™»å‡º

æ¥ç€è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ª**ç™»å‡º**åŠŸèƒ½ï¼Œåœ¨ `accounts/api/views.py`  ä¸­çš„ `AccountViewSet` è§†å›¾ç±»ä¸‹å¢åŠ ä¸€ä¸ª `logout` æ–¹æ³•ï¼š

```python
    @action(methods=['POST'], detail=False)
    def logout(self, request):
        """
        ç™»å‡ºå½“å‰ç”¨æˆ·
        """
        django_logout(request)
        return Response({"success": True})
```



### 5. æ³¨å†Œè·¯ç”±

ä¿®æ”¹ `twitter/urls.py` æ–‡ä»¶ï¼Œä¸ºæˆ‘ä»¬æ–°å†™çš„è§†å›¾ç±» `AccountViewSet` æ³¨å†Œè·¯ç”±ï¼š

```python
router.register(r'api/accounts', views.AccountViewSet, basename='accounts')
```



åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†æ³¨å†Œã€ç™»å½•ã€ç™»å‡ºå’ŒæŸ¥çœ‹ç™»å½•çŠ¶æ€çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹å§ï¼æ‰“å¼€å®¿ä¸»æœºä¸Šçš„æµè§ˆå™¨ï¼Œè¾“å…¥ `http://localhost/api/accounts/signup/` æ¥è®¿é—®æ³¨å†Œé¡µé¢ã€‚

> ä¸è¦å¿˜è®° URL æœ«å°¾çš„ `/` ç¬¦å·ï¼Œåœ¨ Django ä¸­ url å¿…é¡»ä»¥æ­¤ç»“å°¾ï¼Œä¸ç„¶ä¼šå¼•èµ· 301 é‡å®šå‘

![](./img/93.png)



> æ³¨æ„ï¼Œå½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ `http://localhost/api/accounts/signup/` çš„æ—¶å€™ï¼Œæ˜¯ä½¿ç”¨ GET æ–¹æ³•ï¼ˆå’Œä»£ç æ— å…³ï¼Œè¿™æ˜¯æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºï¼‰ï¼Œæ‰€ä»¥ä¼šæ˜¾ç¤º `"detail":"Method \"GET\" not allowed`ï¼Œè¿™æ˜¯æ­£ç¡®çš„ï¼Œæ³¨å†Œæ˜¯ä¸€ä¸ªæ–°å»ºæ•°æ®è®°å½•çš„æ“ä½œï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ POST æ–¹æ³•ï¼Œè€Œä¸æ˜¯ GETï¼Œæƒ³è¦å‘èµ· POST è¯·æ±‚å°±è¦æŒ‰ POST æŒ‰é’®



è¾“å…¥ `http://localhost/api/accounts/login/` æ¥è®¿é—®ç™»å½•é¡µé¢ã€‚

![](./img/94.png)

è¾“å…¥ `http://localhost/api/accounts/login_status/` æ¥è®¿é—®æŸ¥çœ‹ç™»å½•çŠ¶æ€é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç›®å‰æ˜¯æ­£åœ¨ç™»å½•çŠ¶æ€ã€‚

![](./img/95.png)

è¾“å…¥ `http://localhost/api/accounts/logout/` æ¥è®¿é—®ç™»å‡ºé¡µé¢ã€‚

> ç™»å‡ºä¹Ÿæ˜¯ä¸€ä¸ª POST æ“ä½œï¼Œä¸èƒ½ä½¿ç”¨ GET æ–¹æ³•è®¿é—®

![](./img/96.png)

å†æ¬¡è¾“å…¥ `http://localhost/api/accounts/login_status/` æ¥æŸ¥çœ‹ç™»å½•çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç°åœ¨æ˜¯æœªç™»å½•çŠ¶æ€ã€‚

![](./img/97.png)



## å•å…ƒæµ‹è¯•

é¦–å…ˆåœ¨ `accounts/api` è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ª `tests.py` æ–‡ä»¶ï¼Œé¦–å…ˆå…ˆåˆ—å‡ºå†™å•å…ƒæµ‹è¯•ä¼šå¯¼å…¥çš„åŒ…ä»¥åŠå¸¸é‡ (è¿™éƒ¨åˆ†å¯ä»¥å…ˆä¸ç”¨çœ‹ï¼Œåˆ°æ—¶å€™ç”¨åˆ°å†å›æ¥çœ‹å°±è¡Œ)ï¼š

```python
from django.test import TestCase
from rest_framework.test import APIClient
from django.contrib.auth.models import User


LOGIN_URL = '/api/accounts/login/'
LOGOUT_URL = '/api/accounts/logout/'
SIGNUP_URL = '/api/accounts/signup/'
LOGIN_STATUS_URL = '/api/accounts/login_status/'
```

ç„¶åå†åœ¨ `tests.py` æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªå•å…ƒæµ‹è¯•ç±» `AccountApiTests` ï¼Œå¹¶å®ç°å®ƒç”Ÿæˆæµ‹è¯•æ•°æ®çš„åŠŸèƒ½ï¼š

```python
class AccountApiTests(TestCase):

    def setUp(self):
        # è¿™ä¸ªå‡½æ•°ä¼šåœ¨æ¯ä¸ª test function æ‰§è¡Œçš„æ—¶å€™è¢«æ‰§è¡Œ
        self.client = APIClient()
        self.user = self.createUser(
            username='admin',
            email='admin@jiuzhang.com',
            password='correct password',
        )

    def createUser(self, username, email, password):
        # ä¸èƒ½å†™æˆ User.objects.create()
        # å› ä¸º password éœ€è¦è¢«åŠ å¯†, username å’Œ email éœ€è¦è¿›è¡Œä¸€äº› normalize å¤„ç†
        return User.objects.create_user(username, email, password)
```

æ¥ç€æˆ‘ä»¬æ¥å®ç°æµ‹è¯•ç™»å½•çš„åŠŸèƒ½ï¼Œåœ¨ `AccountApiTests` ç±»ä¸‹æ·»åŠ  `test_login` æ–¹æ³•ï¼š

```python
    def test_login(self):
        # æ¯ä¸ªæµ‹è¯•å‡½æ•°å¿…é¡»ä»¥ test_ å¼€å¤´ï¼Œæ‰ä¼šè¢«è‡ªåŠ¨è°ƒç”¨è¿›è¡Œæµ‹è¯•
        # æµ‹è¯•å¿…é¡»ç”¨ post è€Œä¸æ˜¯ get
        response = self.client.get(LOGIN_URL, {
            'username': self.user.username,
            'password': 'correct password',
        })
        # ç™»é™†å¤±è´¥ï¼Œhttp status code è¿”å› 405 = METHOD_NOT_ALLOWED
        self.assertEqual(response.status_code, 405)

        # ç”¨äº† post ä½†æ˜¯å¯†ç é”™äº†
        response = self.client.post(LOGIN_URL, {
            'username': self.user.username,
            'password': 'wrong password',
        })
        self.assertEqual(response.status_code, 400)

        # éªŒè¯è¿˜æ²¡æœ‰ç™»å½•
        response = self.client.get(LOGIN_STATUS_URL)
        self.assertEqual(response.data['has_logged_in'], False)
        # ç”¨æ­£ç¡®çš„å¯†ç 
        response = self.client.post(LOGIN_URL, {
            'username': self.user.username,
            'password': 'correct password',
        })
        self.assertEqual(response.status_code, 200)
        self.assertNotEqual(response.data['user'], None)
        self.assertEqual(response.data['user']['email'], 'admin@jiuzhang.com')
        # éªŒè¯å·²ç»ç™»å½•äº†
        response = self.client.get(LOGIN_STATUS_URL)
        self.assertEqual(response.data['has_logged_in'], True)
```

åŒæ ·æ·»åŠ  `test_logout` æ–¹æ³•æ¥æµ‹è¯•ç™»å‡ºï¼š

```python
    def test_logout(self):
        # å…ˆç™»å½•
        self.client.post(LOGIN_URL, {
            'username': self.user.username,
            'password': 'correct password',
        })
        # éªŒè¯ç”¨æˆ·å·²ç»ç™»å½•
        response = self.client.get(LOGIN_STATUS_URL)
        self.assertEqual(response.data['has_logged_in'], True)

        # æµ‹è¯•å¿…é¡»ç”¨ post
        response = self.client.get(LOGOUT_URL)
        self.assertEqual(response.status_code, 405)

        # æ”¹ç”¨ post æˆåŠŸ logout
        response = self.client.post(LOGOUT_URL)
        self.assertEqual(response.status_code, 200)
        # éªŒè¯ç”¨æˆ·å·²ç»ç™»å‡º
        response = self.client.get(LOGIN_STATUS_URL)
        self.assertEqual(response.data['has_logged_in'], False)
```

ä»¥åŠæ·»åŠ  `test_signup` æ–¹æ³•æ¥æµ‹è¯•æ³¨å†Œï¼š

```python
 def test_signup(self):
        data = {
            'username': 'someone',
            'email': 'someone@jiuzhang.com',
            'password': 'any password',
        }
        # æµ‹è¯• get è¯·æ±‚å¤±è´¥
        response = self.client.get(SIGNUP_URL, data)
        self.assertEqual(response.status_code, 405)

        # æµ‹è¯•é”™è¯¯çš„é‚®ç®±
        response = self.client.post(SIGNUP_URL, {
            'username': 'someone',
            'email': 'not a correct email',
            'password': 'any password'
        })
        # print(response.data)
        self.assertEqual(response.status_code, 400)

        # æµ‹è¯•å¯†ç å¤ªçŸ­
        response = self.client.post(SIGNUP_URL, {
            'username': 'someone',
            'email': 'someone@jiuzhang.com',
            'password': '123',
        })
        # print(response.data)
        self.assertEqual(response.status_code, 400)

        # æµ‹è¯•ç”¨æˆ·åå¤ªé•¿
        response = self.client.post(SIGNUP_URL, {
            'username': 'username is tooooooooooooooooo loooooooong',
            'email': 'someone@jiuzhang.com',
            'password': 'any password',
        })
        # print(response.data)
        self.assertEqual(response.status_code, 400)

        # æˆåŠŸæ³¨å†Œ
        response = self.client.post(SIGNUP_URL, data)
        self.assertEqual(response.status_code, 201)
        self.assertEqual(response.data['user']['username'], 'someone')
        # éªŒè¯ç”¨æˆ·å·²ç»ç™»å…¥
        response = self.client.get(LOGIN_STATUS_URL)
        self.assertEqual(response.data['has_logged_in'], True)
```

å•å…ƒæµ‹è¯•æ·»åŠ å®Œæ¯•ï¼Œè®©æˆ‘ä»¬æ¥è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„ API æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œå§ï¼åœ¨è™šæ‹Ÿæœºçš„é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```shell
python manage.py test
```

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå…±æ‰§è¡Œäº†ä¸‰ä¸ªæµ‹è¯•ï¼Œå¹¶å…¨éƒ¨é€šè¿‡ã€‚

![](./img/98.png)



> å¦‚æœæŠ¥ 201é”™è¯¯ï¼Œå¯ä»¥è§‚å¯Ÿä¸€ä¸‹`4-user-authentication-api`å’Œ`5-accounts-api-unit-tests`çš„`views.py`æ–‡ä»¶çš„åŒºåˆ«

æœ¬æ•™ç¨‹å·²ç»“æŸ



-------------------------





è¡¥å……ä¸€äº›å†ä¸‹é¢çš„è¯¾ç¨‹ä¸­ä¼šç”¨åˆ°çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼š

# çŸ¥è¯†ç‚¹è¡¥å……

## å…³äºè¿ç§»æ–‡ä»¶

åœ¨æ•™ç¨‹å‰é¢çš„ åˆå§‹åŒ–é¡¹ç›®-æ‰§è¡Œæ•°æ®è¿ç§» é‚£ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ‰§è¡Œäº† `python manage.py migrate` å‘½ä»¤ï¼Œé™¤æ­¤ä¹‹å¤–åœ¨åé¢çš„æ•™ç¨‹ä¸­è¿˜æœ‰ `python manage.py makemigrations` å‘½ä»¤ã€‚

![djangoè¿ç§»](./img/djangoè¿ç§».png)

## å…³äº Mysql ç‰ˆæœ¬é—®é¢˜

åœ¨ `provision.sh` è„šæœ¬ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¸Œæœ›å®‰è£…ä¸€ä¸ª Mysql8 ï¼Œä½†æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹è„šæœ¬ä¼šæ‰§è¡Œå¤±è´¥ï¼Œå¯¼è‡´å®‰è£…äº† ubuntu18 apt ä»“åº“ä¸­é»˜è®¤çš„ mysql5.7

å¯ä»¥åœ¨è™šæ‹Ÿæœºçš„ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ£€æŸ¥ä½ çš„ mysql ç‰ˆæœ¬ï¼šğŸ‘‡

```bash
mysql --version
```

å¦‚æœå®‰è£…äº† 5.7 ï¼Œä¹Ÿä¸å½±å“æ¥ä¸‹æ¥çš„ä½¿ç”¨ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸€ç‚¹ ï¼Œ5.7 çš„é»˜è®¤å­—ç¬¦é›†æ˜¯ä¸€ä¸ªå­—èŠ‚çš„æ‹‰ä¸æ–‡ï¼Œæ— æ³•å­˜å‚¨ä¸­æ–‡ç­‰å¤šå­—èŠ‚å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹é»˜è®¤å­—ç¬¦é›†ä¸º utf8mb4ï¼Œåœ¨è™šæ‹Ÿæœºçš„ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

è¯¥å‘½ä»¤ä¼šä¿®æ”¹ `/etc/mysql/mysql.conf.d/mysqld.cnf` é…ç½®æ–‡ä»¶ä¸­å…³äº mysql server çš„å­—ç¬¦é›†é…ç½®ğŸ‘‡

```bash
echo "character-set-server = utf8mb4" | sudo tee -a /etc/mysql/mysql.conf.d/mysqld.cnf > /dev/null
```

é‡å¯ä¸€ä¸‹ mysql æœåŠ¡å™¨ğŸ‘‡

```bash
sudo service mysql restart
```

å¥½äº†ï¼Œæ­¤æ—¶å­—ç¬¦é›†å°±å˜æˆ utf8mb4 äº†

## æ›´å¤šèµ„æ–™

ä¸ºå¤§å®¶å‡†å¤‡äº† `tutorial_pdf/ä¸€äº›æœ‰åŠ©äºå¼€å‘çš„å®ç”¨å°æŠ€å·§/ä¸€äº›æœ‰åŠ©äºå¼€å‘çš„å®ç”¨å°æŠ€å·§.md` ï¼Œä»‹ç»æ›´å¤šæœ‰åŠ©äºå¼€å‘çš„å®ç”¨å°æŠ€å·§